"use strict";(self.webpackChunkdocusaurusfeedback=self.webpackChunkdocusaurusfeedback||[]).push([[7615],{1310:(e,t,n)=>{n.d(t,{Z:()=>v});n(7294);var i=n(512),r=n(5281),s=n(2802),o=n(8596),a=n(3692),l=n(5999),u=n(4996),c=n(5893);function d(e){return(0,c.jsx)("svg",{viewBox:"0 0 24 24",...e,children:(0,c.jsx)("path",{d:"M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z",fill:"currentColor"})})}const h={breadcrumbHomeIcon:"breadcrumbHomeIcon_YNFT"};function f(){const e=(0,u.Z)("/");return(0,c.jsx)("li",{className:"breadcrumbs__item",children:(0,c.jsx)(a.Z,{"aria-label":(0,l.I)({id:"theme.docs.breadcrumbs.home",message:"Home page",description:"The ARIA label for the home page in the breadcrumbs"}),className:"breadcrumbs__link",href:e,children:(0,c.jsx)(d,{className:h.breadcrumbHomeIcon})})})}const p={breadcrumbsContainer:"breadcrumbsContainer_Z_bl"};function g(e){let{children:t,href:n,isLast:i}=e;const r="breadcrumbs__link";return i?(0,c.jsx)("span",{className:r,itemProp:"name",children:t}):n?(0,c.jsx)(a.Z,{className:r,href:n,itemProp:"item",children:(0,c.jsx)("span",{itemProp:"name",children:t})}):(0,c.jsx)("span",{className:r,children:t})}function _(e){let{children:t,active:n,index:r,addMicrodata:s}=e;return(0,c.jsxs)("li",{...s&&{itemScope:!0,itemProp:"itemListElement",itemType:"https://schema.org/ListItem"},className:(0,i.Z)("breadcrumbs__item",{"breadcrumbs__item--active":n}),children:[t,(0,c.jsx)("meta",{itemProp:"position",content:String(r+1)})]})}function v(){const e=(0,s.s1)(),t=(0,o.Ns)();return e?(0,c.jsx)("nav",{className:(0,i.Z)(r.k.docs.docBreadcrumbs,p.breadcrumbsContainer),"aria-label":(0,l.I)({id:"theme.docs.breadcrumbs.navAriaLabel",message:"Breadcrumbs",description:"The ARIA label for the breadcrumbs"}),children:(0,c.jsxs)("ul",{className:"breadcrumbs",itemScope:!0,itemType:"https://schema.org/BreadcrumbList",children:[t&&(0,c.jsx)(f,{}),e.map(((t,n)=>{const i=n===e.length-1,r="category"===t.type&&t.linkUnlisted?void 0:t.href;return(0,c.jsx)(_,{active:i,index:n,addMicrodata:!!r,children:(0,c.jsx)(g,{href:r,isLast:i,children:t.label})},n)}))]})}):null}},6546:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});n(7294);var i=n(1944),r=n(5130),s=n(5893);function o(){const{metadata:e,frontMatter:t,assets:n}=(0,r.k)();return(0,s.jsx)(i.d,{title:e.title,description:e.description,keywords:t.keywords,image:n.image??t.image})}var a=n(512),l=n(7524),u=n(49);function c(){const{metadata:e}=(0,r.k)();return(0,s.jsx)(u.Z,{previous:e.previous,next:e.next})}var d=n(3120),h=n(4364),f=n(8248),p=n(5281),g=n(6043),_=n(3743),v=n(5999);const m={tocCollapsibleButton:"tocCollapsibleButton_TO0P",tocCollapsibleButtonExpanded:"tocCollapsibleButtonExpanded_MG3E"};function y(e){let{collapsed:t,...n}=e;return(0,s.jsx)("button",{type:"button",...n,className:(0,a.Z)("clean-btn",m.tocCollapsibleButton,!t&&m.tocCollapsibleButtonExpanded,n.className),children:(0,s.jsx)(v.Z,{id:"theme.TOCCollapsible.toggleButtonLabel",description:"The label used by the button on the collapsible TOC component",children:"On this page"})})}const b={tocCollapsible:"tocCollapsible_ETCw",tocCollapsibleContent:"tocCollapsibleContent_vkbj",tocCollapsibleExpanded:"tocCollapsibleExpanded_sAul"};function k(e){let{toc:t,className:n,minHeadingLevel:i,maxHeadingLevel:r}=e;const{collapsed:o,toggleCollapsed:l}=(0,g.u)({initialState:!0});return(0,s.jsxs)("div",{className:(0,a.Z)(b.tocCollapsible,!o&&b.tocCollapsibleExpanded,n),children:[(0,s.jsx)(y,{collapsed:o,onClick:l}),(0,s.jsx)(g.z,{lazy:!0,className:b.tocCollapsibleContent,collapsed:o,children:(0,s.jsx)(_.Z,{toc:t,minHeadingLevel:i,maxHeadingLevel:r})})]})}const w={tocMobile:"tocMobile_ITEo"};function x(){const{toc:e,frontMatter:t}=(0,r.k)();return(0,s.jsx)(k,{toc:e,minHeadingLevel:t.toc_min_heading_level,maxHeadingLevel:t.toc_max_heading_level,className:(0,a.Z)(p.k.docs.docTocMobile,w.tocMobile)})}var S=n(9407);function F(){const{toc:e,frontMatter:t}=(0,r.k)();return(0,s.jsx)(S.Z,{toc:e,minHeadingLevel:t.toc_min_heading_level,maxHeadingLevel:t.toc_max_heading_level,className:p.k.docs.docTocDesktop})}var P=n(2503),I=n(1404);function C(e){let{children:t}=e;const n=function(){const{metadata:e,frontMatter:t,contentTitle:n}=(0,r.k)();return t.hide_title||void 0!==n?null:e.title}();return(0,s.jsxs)("div",{className:(0,a.Z)(p.k.docs.docMarkdown,"markdown"),children:[n&&(0,s.jsx)("header",{children:(0,s.jsx)(P.Z,{as:"h1",children:n})}),(0,s.jsx)(I.Z,{children:t})]})}var E=n(1310),R=n(2212);const j={docItemContainer:"docItemContainer_Djhp",docItemCol:"docItemCol_VOVn"};function T(e){let{children:t}=e;const n=function(){const{frontMatter:e,toc:t}=(0,r.k)(),n=(0,l.i)(),i=e.hide_table_of_contents,o=!i&&t.length>0;return{hidden:i,mobile:o?(0,s.jsx)(x,{}):void 0,desktop:!o||"desktop"!==n&&"ssr"!==n?void 0:(0,s.jsx)(F,{})}}(),{metadata:{unlisted:i}}=(0,r.k)();return(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:(0,a.Z)("col",!n.hidden&&j.docItemCol),children:[i&&(0,s.jsx)(R.Z,{}),(0,s.jsx)(d.Z,{}),(0,s.jsxs)("div",{className:j.docItemContainer,children:[(0,s.jsxs)("article",{children:[(0,s.jsx)(E.Z,{}),(0,s.jsx)(h.Z,{}),n.mobile,(0,s.jsx)(C,{children:t}),(0,s.jsx)(f.Z,{})]}),(0,s.jsx)(c,{})]})]}),n.desktop&&(0,s.jsx)("div",{className:"col col--3",children:n.desktop})]})}function L(e){const t=`docs-doc-id-${e.content.metadata.id}`,n=e.content;return(0,s.jsx)(r.b,{content:e.content,children:(0,s.jsxs)(i.FG,{className:t,children:[(0,s.jsx)(o,{}),(0,s.jsx)(T,{children:(0,s.jsx)(n,{})})]})})}},49:(e,t,n)=>{n.d(t,{Z:()=>o});n(7294);var i=n(5999),r=n(2244),s=n(5893);function o(e){const{previous:t,next:n}=e;return(0,s.jsxs)("nav",{className:"pagination-nav docusaurus-mt-lg","aria-label":(0,i.I)({id:"theme.docs.paginator.navAriaLabel",message:"Docs pages",description:"The ARIA label for the docs pagination"}),children:[t&&(0,s.jsx)(r.Z,{...t,subLabel:(0,s.jsx)(i.Z,{id:"theme.docs.paginator.previous",description:"The label used to navigate to the previous doc",children:"Previous"})}),n&&(0,s.jsx)(r.Z,{...n,subLabel:(0,s.jsx)(i.Z,{id:"theme.docs.paginator.next",description:"The label used to navigate to the next doc",children:"Next"}),isNext:!0})]})}},4364:(e,t,n)=>{n.d(t,{Z:()=>l});n(7294);var i=n(512),r=n(5999),s=n(5281),o=n(4477),a=n(5893);function l(e){let{className:t}=e;const n=(0,o.E)();return n.badge?(0,a.jsx)("span",{className:(0,i.Z)(t,s.k.docs.docVersionBadge,"badge badge--secondary"),children:(0,a.jsx)(r.Z,{id:"theme.docs.versionBadge.label",values:{versionLabel:n.label},children:"Version: {versionLabel}"})}):null}},3120:(e,t,n)=>{n.d(t,{Z:()=>_});n(7294);var i=n(512),r=n(2263),s=n(3692),o=n(5999),a=n(143),l=n(5281),u=n(373),c=n(4477),d=n(5893);const h={unreleased:function(e){let{siteTitle:t,versionMetadata:n}=e;return(0,d.jsx)(o.Z,{id:"theme.docs.versions.unreleasedVersionLabel",description:"The label used to tell the user that he's browsing an unreleased doc version",values:{siteTitle:t,versionLabel:(0,d.jsx)("b",{children:n.label})},children:"This is unreleased documentation for {siteTitle} {versionLabel} version."})},unmaintained:function(e){let{siteTitle:t,versionMetadata:n}=e;return(0,d.jsx)(o.Z,{id:"theme.docs.versions.unmaintainedVersionLabel",description:"The label used to tell the user that he's browsing an unmaintained doc version",values:{siteTitle:t,versionLabel:(0,d.jsx)("b",{children:n.label})},children:"This is documentation for {siteTitle} {versionLabel}, which is no longer actively maintained."})}};function f(e){const t=h[e.versionMetadata.banner];return(0,d.jsx)(t,{...e})}function p(e){let{versionLabel:t,to:n,onClick:i}=e;return(0,d.jsx)(o.Z,{id:"theme.docs.versions.latestVersionSuggestionLabel",description:"The label used to tell the user to check the latest version",values:{versionLabel:t,latestVersionLink:(0,d.jsx)("b",{children:(0,d.jsx)(s.Z,{to:n,onClick:i,children:(0,d.jsx)(o.Z,{id:"theme.docs.versions.latestVersionLinkLabel",description:"The label used for the latest version suggestion link label",children:"latest version"})})})},children:"For up-to-date documentation, see the {latestVersionLink} ({versionLabel})."})}function g(e){let{className:t,versionMetadata:n}=e;const{siteConfig:{title:s}}=(0,r.Z)(),{pluginId:o}=(0,a.gA)({failfast:!0}),{savePreferredVersionName:c}=(0,u.J)(o),{latestDocSuggestion:h,latestVersionSuggestion:g}=(0,a.Jo)(o),_=h??(v=g).docs.find((e=>e.id===v.mainDocId));var v;return(0,d.jsxs)("div",{className:(0,i.Z)(t,l.k.docs.docVersionBanner,"alert alert--warning margin-bottom--md"),role:"alert",children:[(0,d.jsx)("div",{children:(0,d.jsx)(f,{siteTitle:s,versionMetadata:n})}),(0,d.jsx)("div",{className:"margin-top--md",children:(0,d.jsx)(p,{versionLabel:g.label,to:_.path,onClick:()=>c(g.name)})})]})}function _(e){let{className:t}=e;const n=(0,c.E)();return n.banner?(0,d.jsx)(g,{className:t,versionMetadata:n}):null}},4881:(e,t,n)=>{n.d(t,{Z:()=>c});n(7294);var i=n(5999),r=n(5281),s=n(3692),o=n(512);const a={iconEdit:"iconEdit_Z9Sw"};var l=n(5893);function u(e){let{className:t,...n}=e;return(0,l.jsx)("svg",{fill:"currentColor",height:"20",width:"20",viewBox:"0 0 40 40",className:(0,o.Z)(a.iconEdit,t),"aria-hidden":"true",...n,children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"})})})}function c(e){let{editUrl:t}=e;return(0,l.jsxs)(s.Z,{to:t,className:r.k.common.editThisPage,children:[(0,l.jsx)(u,{}),(0,l.jsx)(i.Z,{id:"theme.common.editThisPage",description:"The link label to edit the current page",children:"Edit this page"})]})}},3471:(e,t,n)=>{n.d(t,{Z:()=>l});n(7294);var i=n(5999),r=n(5281),s=n(5893);function o(e){let{lastUpdatedAt:t,formattedLastUpdatedAt:n}=e;return(0,s.jsx)(i.Z,{id:"theme.lastUpdated.atDate",description:"The words used to describe on which date a page has been last updated",values:{date:(0,s.jsx)("b",{children:(0,s.jsx)("time",{dateTime:new Date(1e3*t).toISOString(),children:n})})},children:" on {date}"})}function a(e){let{lastUpdatedBy:t}=e;return(0,s.jsx)(i.Z,{id:"theme.lastUpdated.byUser",description:"The words used to describe by who the page has been last updated",values:{user:(0,s.jsx)("b",{children:t})},children:" by {user}"})}function l(e){let{lastUpdatedAt:t,formattedLastUpdatedAt:n,lastUpdatedBy:l}=e;return(0,s.jsxs)("span",{className:r.k.common.lastUpdated,children:[(0,s.jsx)(i.Z,{id:"theme.lastUpdated.lastUpdatedAtBy",description:"The sentence used to display when a page has been last updated, and by who",values:{atDate:t&&n?(0,s.jsx)(o,{lastUpdatedAt:t,formattedLastUpdatedAt:n}):"",byUser:l?(0,s.jsx)(a,{lastUpdatedBy:l}):""},children:"Last updated{atDate}{byUser}"}),!1]})}},2244:(e,t,n)=>{n.d(t,{Z:()=>o});n(7294);var i=n(512),r=n(3692),s=n(5893);function o(e){const{permalink:t,title:n,subLabel:o,isNext:a}=e;return(0,s.jsxs)(r.Z,{className:(0,i.Z)("pagination-nav__link",a?"pagination-nav__link--next":"pagination-nav__link--prev"),to:t,children:[o&&(0,s.jsx)("div",{className:"pagination-nav__sublabel",children:o}),(0,s.jsx)("div",{className:"pagination-nav__label",children:n})]})}},9407:(e,t,n)=>{n.d(t,{Z:()=>u});n(7294);var i=n(512),r=n(3743);const s={tableOfContents:"tableOfContents_bqdL",docItemContainer:"docItemContainer_F8PC"};var o=n(5893);const a="table-of-contents__link toc-highlight",l="table-of-contents__link--active";function u(e){let{className:t,...n}=e;return(0,o.jsx)("div",{className:(0,i.Z)(s.tableOfContents,"thin-scrollbar",t),children:(0,o.jsx)(r.Z,{...n,linkClassName:a,linkActiveClassName:l})})}},3743:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(7294),r=n(6668);function s(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);t.forEach(((e,t)=>{const i=n.slice(2,e.level);e.parentIndex=Math.max(...i),n[e.level]=t}));const i=[];return t.forEach((e=>{const{parentIndex:n,...r}=e;n>=0?t[n].children.push(r):i.push(r)})),i}function o(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:i}=e;return t.flatMap((e=>{const t=o({toc:e.children,minHeadingLevel:n,maxHeadingLevel:i});return function(e){return e.level>=n&&e.level<=i}(e)?[{...e,children:t}]:t}))}function a(e){const t=e.getBoundingClientRect();return t.top===t.bottom?a(e.parentNode):t}function l(e,t){let{anchorTopOffset:n}=t;const i=e.find((e=>a(e).top>=n));if(i){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(a(i))?i:e[e.indexOf(i)-1]??null}return e[e.length-1]??null}function u(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:t}}=(0,r.L)();return(0,i.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function c(e){const t=(0,i.useRef)(void 0),n=u();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:i,linkActiveClassName:r,minHeadingLevel:s,maxHeadingLevel:o}=e;function a(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(i),a=function(e){let{minHeadingLevel:t,maxHeadingLevel:n}=e;const i=[];for(let r=t;r<=n;r+=1)i.push(`h${r}.anchor`);return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:s,maxHeadingLevel:o}),u=l(a,{anchorTopOffset:n.current}),c=e.find((e=>u&&u.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,n){n?(t.current&&t.current!==e&&t.current.classList.remove(r),e.classList.add(r),t.current=e):e.classList.remove(r)}(e,e===c)}))}return document.addEventListener("scroll",a),document.addEventListener("resize",a),a(),()=>{document.removeEventListener("scroll",a),document.removeEventListener("resize",a)}}),[e,n])}var d=n(3692),h=n(5893);function f(e){let{toc:t,className:n,linkClassName:i,isChild:r}=e;return t.length?(0,h.jsx)("ul",{className:r?void 0:n,children:t.map((e=>(0,h.jsxs)("li",{children:[(0,h.jsx)(d.Z,{to:`#${e.id}`,className:i??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,h.jsx)(f,{isChild:!0,toc:e.children,className:n,linkClassName:i})]},e.id)))}):null}const p=i.memo(f);function g(e){let{toc:t,className:n="table-of-contents table-of-contents__left-border",linkClassName:a="table-of-contents__link",linkActiveClassName:l,minHeadingLevel:u,maxHeadingLevel:d,...f}=e;const g=(0,r.L)(),_=u??g.tableOfContents.minHeadingLevel,v=d??g.tableOfContents.maxHeadingLevel,m=function(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:r}=e;return(0,i.useMemo)((()=>o({toc:s(t),minHeadingLevel:n,maxHeadingLevel:r})),[t,n,r])}({toc:t,minHeadingLevel:_,maxHeadingLevel:v});return c((0,i.useMemo)((()=>{if(a&&l)return{linkClassName:a,linkActiveClassName:l,minHeadingLevel:_,maxHeadingLevel:v}}),[a,l,_,v])),(0,h.jsx)(p,{toc:m,className:n,linkClassName:a,...f})}},3008:(e,t,n)=>{n.d(t,{Z:()=>a});n(7294);var i=n(512),r=n(3692);const s={tag:"tag_zVej",tagRegular:"tagRegular_sFm0",tagWithCount:"tagWithCount_h2kH"};var o=n(5893);function a(e){let{permalink:t,label:n,count:a}=e;return(0,o.jsxs)(r.Z,{href:t,className:(0,i.Z)(s.tag,a?s.tagWithCount:s.tagRegular),children:[n,a&&(0,o.jsx)("span",{children:a})]})}},1526:(e,t,n)=>{n.d(t,{Z:()=>l});n(7294);var i=n(512),r=n(5999),s=n(3008);const o={tags:"tags_jXut",tag:"tag_QGVx"};var a=n(5893);function l(e){let{tags:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("b",{children:(0,a.jsx)(r.Z,{id:"theme.tags.tagsListLabel",description:"The label alongside a tag list",children:"Tags:"})}),(0,a.jsx)("ul",{className:(0,i.Z)(o.tags,"padding--none","margin-left--sm"),children:t.map((e=>{let{label:t,permalink:n}=e;return(0,a.jsx)("li",{className:o.tag,children:(0,a.jsx)(s.Z,{label:t,permalink:n})},n)}))})]})}},2212:(e,t,n)=>{n.d(t,{Z:()=>f});n(7294);var i=n(512),r=n(5999),s=n(5742),o=n(5893);function a(){return(0,o.jsx)(r.Z,{id:"theme.unlistedContent.title",description:"The unlisted content banner title",children:"Unlisted page"})}function l(){return(0,o.jsx)(r.Z,{id:"theme.unlistedContent.message",description:"The unlisted content banner message",children:"This page is unlisted. Search engines will not index it, and only users having a direct link can access it."})}function u(){return(0,o.jsx)(s.Z,{children:(0,o.jsx)("meta",{name:"robots",content:"noindex, nofollow"})})}var c=n(5281),d=n(9047);function h(e){let{className:t}=e;return(0,o.jsx)(d.Z,{type:"caution",title:(0,o.jsx)(a,{}),className:(0,i.Z)(t,c.k.common.unlistedBanner),children:(0,o.jsx)(l,{})})}function f(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,{}),(0,o.jsx)(h,{...e})]})}},5130:(e,t,n)=>{n.d(t,{b:()=>a,k:()=>l});var i=n(7294),r=n(902),s=n(5893);const o=i.createContext(null);function a(e){let{children:t,content:n}=e;const r=function(e){return(0,i.useMemo)((()=>({metadata:e.metadata,frontMatter:e.frontMatter,assets:e.assets,contentTitle:e.contentTitle,toc:e.toc})),[e])}(n);return(0,s.jsx)(o.Provider,{value:r,children:t})}function l(){const e=(0,i.useContext)(o);if(null===e)throw new r.i6("DocProvider");return e}},9893:(e,t,n)=>{function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}n.d(t,{ZP:()=>di});var y={DEBUG:!1,LIB_VERSION:"1.97.1"},b=Array.isArray,k=Object.prototype,w=k.hasOwnProperty,x=k.toString,S=b||function(e){return"[object Array]"===x.call(e)},F=function(e){return"[object Uint8Array]"===x.call(e)},P=function(e){return"function"==typeof e},I=function(e){return e===Object(e)&&!S(e)},C=function(e){return void 0===e},E=function(e){return"[object String]"==x.call(e)},R=function(e){return null===e},j=function(e){return"[object Number]"==x.call(e)},T=function(e){return"[object Boolean]"===x.call(e)},L=Array.prototype,M=L.forEach,O=L.indexOf,N="undefined"!=typeof window?window:void 0,A=null==N?void 0:N.navigator,$=null==N?void 0:N.document,B=null==A?void 0:A.userAgent,D=null!=N?N:{},H="[PostHog.js]",q={_log:function(e){if(N&&(y.DEBUG||D.POSTHOG_DEBUG)&&!C(N.console)&&N.console){for(var t=("__rrweb_original__"in N.console[e]?N.console[e].__rrweb_original__:N.console[e]),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.apply(void 0,[H].concat(i))}},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];q._log.apply(q,["log"].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];q._log.apply(q,["warn"].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];q._log.apply(q,["error"].concat(t))},critical:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).error.apply(e,[H].concat(n))},uninitializedWarning:function(e){q.error("You must initialize PostHog before calling ".concat(e))}},U={},V=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Z(e,t,n){if(S(e))if(M&&e.forEach===M)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===U)return}function W(e,t,n){if(!R(e)&&!C(e)){if(S(e))return Z(e,t,n);for(var i in e)if(w.call(e,i)&&t.call(n,e[i],i)===U)return}}var z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Z(n,(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e};function G(e,t){return-1!==e.indexOf(t)}function Y(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}var Q=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},J=function(e){try{return e()}catch(e){return}},X=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(this,n)}catch(e){q.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),q.critical(e)}}},K=function(e){var t={};return W(e,(function(e,n){E(e)&&e.length>0&&(t[n]=e)})),t},ee=["$performance_raw"];function te(e){var t,n,i,r,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,u="",c=[];if(!e)return e;e=ne(e);do{t=(s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,n=s>>12&63,i=s>>6&63,r=63&s,c[l++]=o.charAt(t)+o.charAt(n)+o.charAt(i)+o.charAt(r)}while(a<e.length);switch(u=c.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}var ne=function(e){var t,n,i,r,s="";for(t=n=0,i=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,r=0;r<i;r++){var o=e.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),R(a)||(n>t&&(s+=e.substring(t,n)),s+=a,t=n=r+1)}return n>t&&(s+=e.substring(t,e.length)),s},ie=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,n,i,r,s){if(t)if(t.addEventListener&&!r)t.addEventListener(n,i,!!s);else{var o="on"+n,a=t[o];t[o]=function(t,n,i){return function(r){if(r=r||e(null==N?void 0:N.event)){var s,o=!0;P(i)&&(s=i(r));var a=n.call(t,r);return!1!==s&&!1!==a||(o=!1),o}}}(t,i,a)}else q.error("No valid element provided to register_event")}}();function re(e,t){var n=function(){if(!$)return t("document not found");var n=$.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(e){return t(void 0,e)},n.onerror=function(e){return t(e)};var i,r=$.querySelectorAll("body > script");r.length>0?null===(i=r[0].parentNode)||void 0===i||i.insertBefore(n,r[0]):$.body.appendChild(n)};null!=$&&$.body?n():null==$||$.addEventListener("DOMContentLoaded",n)}function se(e){return e?V(e).split(/\s+/):[]}function oe(e){var t="";switch(s(e.className)){case"string":t=e.className;break;case"object":t=("baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return se(t)}function ae(e){var t="";return fe(e)&&!pe(e)&&e.childNodes&&e.childNodes.length&&W(e.childNodes,(function(e){ce(e)&&e.textContent&&(t+=V(e.textContent).split(/(\s+)/).filter(ge).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))})),V(t)}function le(e){return!!e&&1===e.nodeType}function ue(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function ce(e){return!!e&&3===e.nodeType}function de(e){return!!e&&11===e.nodeType}var he=["a","button","form","input","select","textarea","label"];function fe(e){for(var t=e;t.parentNode&&!ue(t,"body");t=t.parentNode){var n=oe(t);if(G(n,"ph-sensitive")||G(n,"ph-no-capture"))return!1}if(G(oe(e),"ph-include"))return!0;var i=e.type||"";if(E(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=e.name||e.id||"";return!E(r)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,""))}function pe(e){return!!(ue(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||ue(e,"select")||ue(e,"textarea")||"true"===e.getAttribute("contenteditable"))}function ge(e){if(R(e)||C(e))return!1;if(E(e)){if(e=V(e),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(e))return!1}return!0}function _e(e){var t=ae(e);return ge(t="".concat(t," ").concat(ve(e)).trim())?t:""}function ve(e){var t="";return e&&e.childNodes&&e.childNodes.length&&W(e.childNodes,(function(e){var n;if(e&&"span"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase()))try{var i=ae(e);t="".concat(t," ").concat(i).trim(),e.childNodes&&e.childNodes.length&&(t="".concat(t," ").concat(ve(e)).trim())}catch(e){q.error(e)}})),t}function me(e){return function(e){var t=e.map((function(e){var t,n,i="";if(e.tag_name&&(i+=e.tag_name),e.attr_class){e.attr_class.sort();var s,o=m(e.attr_class);try{for(o.s();!(s=o.n()).done;){var a=s.value;i+=".".concat(a.replace(/"/g,""))}}catch(e){o.e(e)}finally{o.f()}}var l=r(r(r(r({},e.text?{text:e.text}:{}),{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{}),e.attr_id?{attr_id:e.attr_id}:{}),e.attributes),u={};return Y(l).sort((function(e,t){var n=p(e,1)[0],i=p(t,1)[0];return n.localeCompare(i)})).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];return u[ye(n.toString())]=ye(i.toString())})),(i+=":")+Y(l).map((function(e){var t=p(e,2),n=t[0],i=t[1];return"".concat(n,'="').concat(i,'"')})).join("")}));return t.join(";")}(function(e){return e.map((function(e){var t,n,i={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(n=e.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:be(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return Y(e).filter((function(e){return 0===p(e,1)[0].indexOf("attr__")})).forEach((function(e){var t=p(e,2),n=t[0],r=t[1];return i.attributes[n]=r})),i}))}(e))}function ye(e){return e.replace(/"|\\"/g,'\\"')}function be(e){var t=e.attr__class;return t?S(t)?t:se(t):void 0}var ke=function(){function e(t){o(this,e),this.clicks=[],this.enabled=t}return l(e,[{key:"isRageClick",value:function(e,t,n){if(!this.enabled)return!1;var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(t-i.y)<30&&n-i.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}]),e}(),we="$people_distinct_id",xe="__alias",Se="__timers",Fe="$autocapture_disabled_server_side",Pe="$session_recording_enabled_server_side",Ie="$console_log_recording_enabled_server_side",Ce="$session_recording_recorder_version_server_side",Ee="$session_recording_network_payload_capture",Re="$sesid",je="$session_is_sampled",Te="$enabled_feature_flags",Le="$early_access_features",Me="$stored_person_properties",Oe="$stored_group_properties",Ne="$surveys",Ae="$flag_call_reported",$e="$user_state",Be="$posthog_quota_limited",De="$client_session_props",He=[we,xe,"__cmpns",Se,Pe,Re,Te,$e,Be,Le,Oe,Me,Ne,Ae,De];function qe(e,t){return t.length>e?t.slice(0,e)+"...":t}var Ue={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(e){var t,n=R(this._isDisabledServerSide)?!(null===(t=e.persistence)||void 0===t||!t.props[Fe]):this._isDisabledServerSide,i=!!e.config.autocapture;this._isAutocaptureEnabled=i&&!n},_previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!le(t));return t},_getAugmentPropertiesFromElement:function(e){if(!fe(e))return{};var t={};return W(e.attributes,(function(e){if(0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),i=e.value;n&&i&&ge(i)&&(t[n]=i)}})),t},_getPropertiesFromElement:function(e,t,n){var i,r=e.tagName.toLowerCase(),s={tag_name:r};he.indexOf(r)>-1&&!n&&("a"===r.toLowerCase()||"button"===r.toLowerCase()?s.$el_text=qe(1024,_e(e)):s.$el_text=qe(1024,ae(e)));var o=oe(e);o.length>0&&(s.classes=o.filter((function(e){return""!==e})));var a=null===(i=this.config)||void 0===i?void 0:i.element_attribute_ignorelist;W(e.attributes,(function(n){var i;if((!pe(e)||-1!==["name","id","class"].indexOf(n.name))&&(null==a||!a.includes(n.name))&&!t&&ge(n.value)&&(i=n.name,!E(i)||"_ngcontent"!==i.substring(0,10)&&"_nghost"!==i.substring(0,7))){var r=n.value;"class"===n.name&&(r=se(r).join(" ")),s["attr__"+n.name]=qe(1024,r)}}));for(var l=1,u=1,c=e;c=this._previousElementSibling(c);)l++,c.tagName===e.tagName&&u++;return s.nth_child=l,s.nth_of_type=u,s},_getDefaultProperties:function(e){return{$event_type:e,$ce_version:1}},_extractCustomPropertyValue:function(e){var t=[];return W(null==$?void 0:$.querySelectorAll(e.css_selector),(function(e){var n;["input","select"].indexOf(e.tagName.toLowerCase())>-1?n=e.value:e.textContent&&(n=e.textContent),ge(n)&&t.push(n)})),t.join(", ")},_getCustomProperties:function(e){var t=this,n={};return W(this._customProperties,(function(i){W(i.event_selectors,(function(r){W(null==$?void 0:$.querySelectorAll(r),(function(r){G(e,r)&&fe(r)&&(n[i.name]=t._extractCustomPropertyValue(i))}))}))})),n},_getEventTarget:function(e){return C(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t},_captureEvent:function(e,t){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$autocapture",s=this._getEventTarget(e);if(ce(s)&&(s=s.parentNode||null),"$autocapture"===r&&"click"===e.type&&e instanceof MouseEvent&&null!==(n=this.rageclicks)&&void 0!==n&&n.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,t,"$rageclick"),s&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!N||!e||ue(e,"html")||!le(e))return!1;if(null!=n&&n.url_allowlist){var i=N.location.href,r=n.url_allowlist;if(r&&!r.some((function(e){return i.match(e)})))return!1}if(null!=n&&n.dom_event_allowlist){var s=n.dom_event_allowlist;if(s&&!s.some((function(e){return t.type===e})))return!1}if(null!=n&&n.element_allowlist){var o=n.element_allowlist;if(o&&!o.some((function(t){return e.tagName.toLowerCase()===t})))return!1}if(null!=n&&n.css_selector_allowlist){var a=n.css_selector_allowlist;if(a&&!a.some((function(t){return e.matches(t)})))return!1}for(var l=!1,u=[e],c=!0,d=e;d.parentNode&&!ue(d,"body");)if(de(d.parentNode))u.push(d.parentNode.host),d=d.parentNode.host;else{if(!(c=d.parentNode||!1))break;if(he.indexOf(c.tagName.toLowerCase())>-1)l=!0;else{var h=N.getComputedStyle(c);h&&"pointer"===h.getPropertyValue("cursor")&&(l=!0)}u.push(c),d=c}var f=N.getComputedStyle(e);if(f&&"pointer"===f.getPropertyValue("cursor")&&"click"===t.type)return!0;var p=e.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return"submit"===t.type;case"input":case"select":case"textarea":return"change"===t.type||"click"===t.type;default:return l?"click"===t.type:"click"===t.type&&(he.indexOf(p)>-1||"true"===e.getAttribute("contenteditable"))}}(s,e,this.config)){for(var o,a,l=[s],u=s;u.parentNode&&!ue(u,"body");)de(u.parentNode)?(l.push(u.parentNode.host),u=u.parentNode.host):(l.push(u.parentNode),u=u.parentNode);var c,d=[],h={},f=!1;if(W(l,(function(e){var n=fe(e);"a"===e.tagName.toLowerCase()&&(c=e.getAttribute("href"),c=n&&ge(c)&&c),G(oe(e),"ph-no-capture")&&(f=!0),d.push(i._getPropertiesFromElement(e,t.config.mask_all_element_attributes,t.config.mask_all_text));var r=i._getAugmentPropertiesFromElement(e);z(h,r)})),t.config.mask_all_text||("a"===s.tagName.toLowerCase()||"button"===s.tagName.toLowerCase()?d[0].$el_text=_e(s):d[0].$el_text=ae(s)),c&&(d[0].attr__href=c),f)return!1;var p=z(this._getDefaultProperties(e.type),t.elementsChainAsString?{$elements_chain:me(d)}:{$elements:d},null!==(o=d[0])&&void 0!==o&&o.$el_text?{$el_text:null===(a=d[0])||void 0===a?void 0:a.$el_text}:{},this._getCustomProperties(l),h);return t.capture(r,p),!0}},_navigate:function(e){N&&(N.location.href=e)},_addDomEventHandlers:function(e){var t=this;if(N&&$){var n=function(n){n=n||(null==N?void 0:N.event),t._captureEvent(n,e)};ie($,"submit",n,!1,!0),ie($,"change",n,!1,!0),ie($,"click",n,!1,!0)}},_customProperties:[],rageclicks:null,config:void 0,init:function(e){var t;T(e.__autocapture)||(this.config=e.__autocapture),null!==(t=this.config)&&void 0!==t&&t.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map((function(e){return new RegExp(e)}))),this.rageclicks=new ke(e.config.rageclick)},afterDecideResponse:function(e,t){var n=t.config.token;this._initializedTokens.indexOf(n)>-1?q.info('autocapture already initialized for token "'+n+'"'):(t.persistence&&t.persistence.register(u({},Fe,!!e.autocapture_opt_out)),this._isDisabledServerSide=!!e.autocapture_opt_out,this._setIsAutocaptureEnabled(t),this._initializedTokens.push(n),e&&e.config&&e.config.enable_collect_everything&&this._isAutocaptureEnabled?(e.custom_properties&&(this._customProperties=e.custom_properties),this._addDomEventHandlers(t)):t.__autocapture=!1)},enabledForProject:function(e,t,n){if(!e)return!0;t=C(t)?10:t,n=C(n)?10:n;for(var i=0,r=0;r<e.length;r++)i+=e.charCodeAt(r);return i%t<n},isBrowserSupported:function(){return P(null==$?void 0:$.querySelectorAll)}};!function(e){for(var t in e)P(e[t])&&(e[t]=e[t].bind(e))}(Ue),function(e){for(var t in e)P(e[t])&&(e[t]=X(e[t]))}(Ue);var Ve="$active_feature_flags",Ze="$override_feature_flags",We="$feature_flag_payloads",ze=function(e){var t,n={},i=m(Y(e||{}));try{for(i.s();!(t=i.n()).done;){var r=p(t.value,2),s=r[0],o=r[1];o&&(n[s]=o)}}catch(e){i.e(e)}finally{i.f()}return n},Ge=function(){function e(t){o(this,e),this.instance=t,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return l(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(Te),t=this.instance.get_property(Ze);if(!t)return e||{};for(var n=z({},e),i=Object.keys(t),r=0;r<i.length;r++)!1===t[i[r]]?delete n[i[r]]:n[i[r]]=t[i[r]];return this._override_warning||(q.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(We)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout((function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())}),5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var t=this.instance.config.token,n=this.instance.get_property(Me),i=this.instance.get_property(Oe),r=te(JSON.stringify({token:t,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.config.api_host+"/decide/?v=3",{data:r},{method:"POST"},this.instance._prepare_callback((function(t){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(t),e.setReloadingPaused(!1),e._startReloadTimer()})))}}},{key:"getFeatureFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var n,i=this.getFlagVariants()[e],r="".concat(i),s=this.instance.get_property(Ae)||{};return!t.send_event&&"send_event"in t||e in s&&s[e].includes(r)||(S(s[e])?s[e].push(r):s[e]=[r],null===(n=this.instance.persistence)||void 0===n||n.register(u({},Ae,s)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:i})),i}q.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);q.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((function(t){return t!==e}))}},{key:"receivedFeatureFlags",value:function(e){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var t=this.getFlagVariants(),n=this.getFlagPayloads();!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=e.featureFlags,o=e.featureFlagPayloads;if(s)if(S(s)){var a,l={};if(s)for(var c=0;c<s.length;c++)l[s[c]]=!0;t&&t.register((u(a={},Ve,s),u(a,Te,l),a))}else{var d,h=s,f=o;e.errorsWhileComputingFlags&&(h=r(r({},n),h),f=r(r({},i),f)),t&&t.register((u(d={},Ve,Object.keys(ze(h))),u(d,Te,h||{}),u(d,We,f||{}),d))}}(e,this.instance.persistence,t,n),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return q.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,!1===e)this.instance.persistence.unregister(Ze);else if(S(e)){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;this.instance.persistence.register(u({},Ze,t))}else this.instance.persistence.register(u({},Ze,e))}},{key:"onFeatureFlags",value:function(e){var t=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var n=this._prepareFeatureFlagsForCallbacks(),i=n.flags,r=n.flagVariants;e(i,r)}return function(){return t.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){var n,i,s=u({},"$feature_enrollment/".concat(e),t);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:t,$set:s}),this.setPersonPropertiesForFlags(s,!1);var o=r(r({},this.getFlagVariants()),{},u({},e,t));null===(n=this.instance.persistence)||void 0===n||n.register((u(i={},Ve,Object.keys(ze(o))),u(i,Te,o),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.instance.get_property(Le);if(i&&!n)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/early_access_features/?token=").concat(this.instance.config.token),{},{method:"GET"},(function(n){var i,r=n.earlyAccessFeatures;return null===(i=t.instance.persistence)||void 0===i||i.register(u({},Le,r)),e(r)}))}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((function(e){return t[e]})),flagVariants:Object.keys(t).filter((function(e){return t[e]})).reduce((function(e,n){return e[n]=t[n],e}),{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var e=this._prepareFeatureFlagsForCallbacks(),t=e.flags,n=e.flagVariants;this.featureFlagEventHandlers.forEach((function(e){return e(t,n)}))}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Me)||{};this.instance.register(u({},Me,r(r({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(Me)}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Oe)||{};0!==Object.keys(n).length&&Object.keys(n).forEach((function(t){n[t]=r(r({},n[t]),e[t]),delete e[t]})),this.instance.register(u({},Oe,r(r({},n),e))),t&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var t=this.instance.get_property(Oe)||{};this.instance.register(u({},Oe,r(r({},t),{},u({},e,{}))))}else this.instance.unregister(Oe)}}]),e}();Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return j(e)&&isFinite(e)&&Math.floor(e)===e});var Ye="0123456789abcdef",Qe=function(){function e(t){if(o(this,e),this.bytes=t,16!==t.length)throw new TypeError("not 128-bit length")}return l(e,[{key:"toString",value:function(){for(var e="",t=0;t<this.bytes.length;t++)e=e+Ye.charAt(this.bytes[t]>>>4)+Ye.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(e){return 0===this.compareTo(e)}},{key:"compareTo",value:function(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}],[{key:"fromFieldsV7",value:function(t,n,i,r){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||t<0||n<0||i<0||r<0||t>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=t/Math.pow(2,40),s[1]=t/Math.pow(2,32),s[2]=t/Math.pow(2,24),s[3]=t/Math.pow(2,16),s[4]=t/Math.pow(2,8),s[5]=t,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new e(s)}}]),e}(),Je=function(){function e(){o(this,e),u(this,"timestamp",0),u(this,"counter",0),u(this,"random",new et)}return l(e,[{key:"generate",value:function(){var e=this.generateOrAbort();if(C(e)){this.timestamp=0;var t=this.generateOrAbort();if(C(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return Qe.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e}(),Xe=function(e){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};N&&!C(N.crypto)&&crypto.getRandomValues&&(Xe=function(e){return crypto.getRandomValues(e)});var Ke,et=function(){function e(){o(this,e),u(this,"buffer",new Uint32Array(8)),u(this,"cursor",1/0)}return l(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(Xe(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e}(),tt=function(){return nt().toString()},nt=function(){return(Ke||(Ke=new Je)).generate()},it="",rt=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function st(e,t){if(t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;if(it)return it;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),i=Math.min(n.length,8),r="dmn_chk_"+tt(),s=new RegExp("(^|;)\\s*"+r+"=1");!it&&i--;){var o=n.slice(i).join("."),a=r+"=1;domain=."+o;t.cookie=a,s.test(t.cookie)&&(t.cookie=a+";expires=Thu, 01 Jan 1970 00:00:00 GMT",it=o)}return it}(e);if(!n){var i=function(e){var t=e.match(rt);return t?t[0]:""}(e);i!==n&&q.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var ot={is_supported:function(){return!!$},error:function(e){q.error("cookieStore error: "+e)},get:function(e){if($){try{for(var t=e+"=",n=$.cookie.split(";").filter((function(e){return e.length})),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}}catch(e){}return null}},parse:function(e){var t;try{t=JSON.parse(ot.get(e))||{}}catch(e){}return t},set:function(e,t,n,i,r){if($)try{var s="",o="",a=st($.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var u=e+"="+encodeURIComponent(JSON.stringify(t))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&q.warn("cookieStore warning: large cookie, len="+u.length),$.cookie=u,u}catch(e){return}},remove:function(e,t){try{ot.set(e,"",-1,t)}catch(e){return}}},at=null,lt={is_supported:function(){if(!R(at))return at;var e=!0;if(C(N))e=!1;else try{var t="__mplssupport__";lt.set(t,"xyz"),'"xyz"'!==lt.get(t)&&(e=!1),lt.remove(t)}catch(t){e=!1}return e||q.error("localStorage unsupported; falling back to cookie store"),at=e,e},error:function(e){q.error("localStorage error: "+e)},get:function(e){try{return null==N?void 0:N.localStorage.getItem(e)}catch(e){lt.error(e)}return null},parse:function(e){try{return JSON.parse(lt.get(e))||{}}catch(e){}return null},set:function(e,t){try{null==N||N.localStorage.setItem(e,JSON.stringify(t))}catch(e){lt.error(e)}},remove:function(e){try{null==N||N.localStorage.removeItem(e)}catch(e){lt.error(e)}}},ut=["distinct_id",Re,je],ct=r(r({},lt),{},{parse:function(e){try{var t={};try{t=ot.parse(e)||{}}catch(e){}var n=z(t,JSON.parse(lt.get(e)||"{}"));return lt.set(e,n),n}catch(e){}return null},set:function(e,t,n,i,r){try{lt.set(e,t);var s={};ut.forEach((function(e){t[e]&&(s[e]=t[e])})),Object.keys(s).length&&ot.set(e,s,n,i,r)}catch(e){lt.error(e)}},remove:function(e,t){try{null==N||N.localStorage.removeItem(e),ot.remove(e,t)}catch(e){lt.error(e)}}}),dt={},ht={is_supported:function(){return!0},error:function(e){q.error("memoryStorage error: "+e)},get:function(e){return dt[e]||null},parse:function(e){return dt[e]||null},set:function(e,t){dt[e]=t},remove:function(e){delete dt[e]}},ft=null,pt={is_supported:function(){if(!R(ft))return ft;if(ft=!0,C(N))ft=!1;else try{var e="__support__";pt.set(e,"xyz"),'"xyz"'!==pt.get(e)&&(ft=!1),pt.remove(e)}catch(e){ft=!1}return ft},error:function(e){q.error("sessionStorage error: ",e)},get:function(e){try{return null==N?void 0:N.sessionStorage.getItem(e)}catch(e){pt.error(e)}return null},parse:function(e){try{return JSON.parse(pt.get(e))||null}catch(e){}return null},set:function(e,t){try{null==N||N.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){pt.error(e)}},remove:function(e){try{null==N||N.sessionStorage.removeItem(e)}catch(e){pt.error(e)}}},gt=["localhost","127.0.0.1"],_t=function(e){var t=null==$?void 0:$.createElement("a");return C(t)?null:(t.href=e,t)},vt=function(e,t){for(var n,i=((e.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===t){n=s;break}}if(!S(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch(e){q.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},mt=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},yt={campaignParams:function(e){var t=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(e||[]),n={};return W(t,(function(e){var t=$?vt($.URL,e):"";t.length&&(n[e]=t)})),n},searchEngine:function(){var e=null==$?void 0:$.referrer;return e?0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null:null},searchInfo:function(){var e=yt.searchEngine(),t="yahoo"!=e?"q":"p",n={};if(!R(e)){n.$search_engine=e;var i=$?vt($.referrer,t):"";i.length&&(n.ph_keyword=i)}return n},browser:function(e,t,n){return t=t||"",n||G(e," OPR/")?G(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":G(e,"IEMobile")||G(e,"WPDesktop")?"Internet Explorer Mobile":G(e,"SamsungBrowser/")?"Samsung Internet":G(e,"Edge")||G(e,"Edg/")?"Microsoft Edge":G(e,"FBIOS")?"Facebook Mobile":G(e,"Chrome")?"Chrome":G(e,"CriOS")?"Chrome iOS":G(e,"UCWEB")||G(e,"UCBrowser")?"UC Browser":G(e,"FxiOS")?"Firefox iOS":G(t,"Apple")||function(e){return G(e,"Safari")&&!G(e,"Chrome")&&!G(e,"Android")}(e)?G(e,"Mobile")?"Mobile Safari":"Safari":G(e,"Android")?"Android Mobile":G(e,"Konqueror")||G(e,"konqueror")?"Konqueror":G(e,"Firefox")?"Firefox":G(e,"MSIE")||G(e,"Trident/")?"Internet Explorer":G(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,n){var i={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[yt.browser(e,t,n)];if(C(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=e.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(e){if(/Windows/i.test(e)){if(/Phone/.test(e)||/WPDesktop/.test(e))return{os_name:"Windows Phone",os_version:""};var t=/Windows NT ([0-9.]+)/i.exec(e);return t&&t[1]?{os_name:"Windows",os_version:t[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(e)){var n=/OS (\d+)_(\d+)_?(\d+)?/i.exec(e);return n&&n[1]?{os_name:"iOS",os_version:[n[1],n[2],n[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(e)){var i=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(e);return i&&i[1]?{os_name:"Android",os_version:[i[1],i[2],i[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(e))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(e)){var r=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(e);return r&&r[1]?{os_name:"Mac OS X",os_version:[r[1],r[2],r[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(e)?{os_name:"Linux",os_version:""}:/CrOS/.test(e)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)&&!/Mobile/.test(e)?"Android Tablet":/Android/.test(e)?"Android":""},deviceType:function(e){var t=this.device(e);return"iPad"===t||"Android Tablet"===t?"Tablet":t?"Mobile":"Desktop"},referrer:function(){return(null==$?void 0:$.referrer)||"$direct"},referringDomain:function(){var e;return null!=$&&$.referrer&&(null===(e=_t($.referrer))||void 0===e?void 0:e.host)||"$direct"},properties:function(){if(!B)return{};var e=yt.os(B),t=e.os_name,n=e.os_version;return z(K({$os:t,$os_version:n,$browser:yt.browser(B,navigator.vendor,D.opera),$device:yt.device(B),$device_type:yt.deviceType(B)}),{$current_url:null==N?void 0:N.location.href,$host:null==N?void 0:N.location.host,$pathname:null==N?void 0:N.location.pathname,$raw_user_agent:B.length>1e3?B.substring(0,997)+"...":B,$browser_version:yt.browserVersion(B,navigator.vendor,D.opera),$browser_language:yt.browserLanguage(),$screen_height:null==N?void 0:N.screen.height,$screen_width:null==N?void 0:N.screen.width,$viewport_height:null==N?void 0:N.innerHeight,$viewport_width:null==N?void 0:N.innerWidth,$lib:"web",$lib_version:y.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Q()/1e3})},people_properties:function(){if(!B)return{};var e=yt.os(B),t=e.os_name,n=e.os_version;return z(K({$os:t,$os_version:n,$browser:yt.browser(B,navigator.vendor,D.opera)}),{$browser_version:yt.browserVersion(B,navigator.vendor,D.opera)})}},bt=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],kt=function(){function e(t){o(this,e);var n="";t.token&&(n=t.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=t.custom_campaign_params||[],t.persistence_name?this.name="ph_"+t.persistence_name:this.name="ph_"+n+"_posthog",-1===bt.indexOf(t.persistence.toLowerCase())&&(q.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var i=t.persistence.toLowerCase();"localstorage"===i&&lt.is_supported()?this.storage=lt:"localstorage+cookie"===i&&ct.is_supported()?this.storage=ct:"sessionstorage"===i&&pt.is_supported()?this.storage=pt:"memory"===i?this.storage=ht:"cookie"===i?this.storage=ot:ct.is_supported()?this.storage=ct:this.storage=ot,this.load(),this.update_config(t),this.save()}return l(e,[{key:"properties",value:function(){var e={};return W(this.props,(function(t,n){if(n===Te&&I(t))for(var i=Object.keys(t),r=0;r<i.length;r++)e["$feature/".concat(i[r])]=t[i[r]];else o=n,a=!1,(R(s=He)?a:O&&s.indexOf===O?-1!=s.indexOf(o):(W(s,(function(e){if(a||(a=e===o))return U})),a))||(e[n]=t);var s,o,a})),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=z({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,t,n){var i=this;if(I(e)){C(t)&&(t="None"),this.expire_days=C(n)?this.default_expiry:n;var r=!1;if(W(e,(function(e,n){i.props.hasOwnProperty(n)&&i.props[n]!==t||(i.props[n]=e,r=!0)})),r)return this.save(),!0}return!1}},{key:"register",value:function(e,t){var n=this;if(I(e)){this.expire_days=C(t)?this.default_expiry:t;var i=!1;if(W(e,(function(t,r){e.hasOwnProperty(r)&&n.props[r]!==t&&(n.props[r]=t,i=!0)})),i)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(yt.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(yt.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||yt.referrer(),$referring_domain:this.props.$referring_domain||yt.referringDomain()})}},{key:"get_referrer_info",value:function(){return K({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(e){return W(this.props,(function(t,n){n in e||(e[n]=t)})),e}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,t){var n=this.props[Se]||{};n[e]=t,this.props[Se]=n,this.save()}},{key:"remove_event_timer",value:function(e){var t=(this.props[Se]||{})[e];return C(t)||(delete this.props[Se][e],this.save()),t}},{key:"get_user_state",value:function(){return this.props[$e]||"anonymous"}},{key:"set_user_state",value:function(e){this.props[$e]=e,this.save()}},{key:"get_quota_limits",value:function(){return this.props[Be]||{}}},{key:"set_quota_limits",value:function(e){this.props[Be]=e,this.save()}}]),e}(),wt=2,xt=4,St=l((function e(t){var n,i,r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),u(this,"bucketSize",100),u(this,"refillRate",10),u(this,"mutationBuckets",{}),u(this,"loggedTracker",{}),u(this,"refillBuckets",(function(){Object.keys(r.mutationBuckets).forEach((function(e){r.mutationBuckets[e]=r.mutationBuckets[e]+r.refillRate,r.mutationBuckets[e]>=r.bucketSize&&delete r.mutationBuckets[e]}))})),u(this,"getNodeOrRelevantParent",(function(e){var t=r.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[r.rrweb.mirror.getId(n),n]}return[e,t]})),u(this,"numberOfChanges",(function(e){var t,n,i,r,s,o,a,l;return(null!==(t=null===(n=e.removes)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(i=null===(r=e.attributes)||void 0===r?void 0:r.length)&&void 0!==i?i:0)+(null!==(s=null===(o=e.texts)||void 0===o?void 0:o.length)&&void 0!==s?s:0)+(null!==(a=null===(l=e.adds)||void 0===l?void 0:l.length)&&void 0!==a?a:0)})),u(this,"throttleMutations",(function(e){if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=r.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((function(e){var t,n,i,s=p(r.getNodeOrRelevantParent(e.id),2),o=s[0],a=s[1];return 0!==r.mutationBuckets[o]&&(r.mutationBuckets[o]=null!==(t=r.mutationBuckets[o])&&void 0!==t?t:r.bucketSize,r.mutationBuckets[o]=Math.max(r.mutationBuckets[o]-1,0),0===r.mutationBuckets[o]&&(r.loggedTracker[o]||(r.loggedTracker[o]=!0,null===(n=(i=r.options).onBlockedNode)||void 0===n||n.call(i,o,a))),e)})));var i=r.numberOfChanges(t);return 0!==i||n===i?e:void 0})),this.rrweb=t,this.options=s,this.refillRate=null!==(n=this.options.refillRate)&&void 0!==n?n:this.refillRate,this.bucketSize=null!==(i=this.options.bucketSize)&&void 0!==i?i:this.bucketSize,setInterval((function(){r.refillBuckets()}),1e3)})),Ft=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(Ft||{}),Pt={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(e){return e},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},It=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Ct=["/s/","/e/","/i/vo/e/"];function Et(e,t,n,i){var r=null==t?void 0:t["content-length"];return r&&parseInt(r)>n?"".concat(i," body too large to record"):e}var Rt,jt=3e5;!function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet"}(Rt||(Rt={}));var Tt=[Rt.MouseMove,Rt.MouseInteraction,Rt.Scroll,Rt.ViewportResize,Rt.Input,Rt.TouchMove,Rt.MediaInteraction,Rt.Drag],Lt=function(){function e(t){var n=this;if(o(this,e),u(this,"isIdle",!1),u(this,"_linkedFlagSeen",!1),u(this,"_lastActivityTimestamp",Date.now()),u(this,"windowId",null),u(this,"sessionId",null),u(this,"_linkedFlag",null),u(this,"_sampleRate",null),u(this,"_minimumDuration",null),u(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=t,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,null==N||N.addEventListener("beforeunload",(function(){n._flushBuffer()})),!this.instance.sessionManager)throw q.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return l(e,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw q.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return j(this._sampleRate)?this.instance.get_property(je):null}},{key:"sessionDuration",get:function(){var e,t,n=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],i=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return n?n.timestamp-i:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(Pe),t=!this.instance.config.disable_session_recording;return N&&e&&t}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(Ie),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}},{key:"recordingVersion",get:function(){var e,t=this.instance.get_property(Ce);return(null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recorderVersion)||t||"v1"}},{key:"networkPayloadCapture",get:function(){var e,t,n=this.instance.get_property(Ee),i={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},r=(null==i?void 0:i.recordHeaders)||(null==n?void 0:n.recordHeaders),s=(null==i?void 0:i.recordBody)||(null==n?void 0:n.recordBody),o=this.instance.config.capture_performance||(null==n?void 0:n.capturePerformance);return r||s||o?{recordHeaders:r,recordBody:s,recordPerformance:o}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?E(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":T(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?this.startCaptureAndTrySendingQueuedSnapshots():(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1)}},{key:"makeSamplingDecision",value:function(e){var t,n=this.sessionId!==e;if(j(this._sampleRate)){var i,r=this.isSampled;(i=n||!T(r)?Math.random()<this._sampleRate:r)||q.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),null===(t=this.instance.persistence)||void 0===t||t.register(u({},je,i))}else{var s;null===(s=this.instance.persistence)||void 0===s||s.register(u({},je,null))}}},{key:"afterDecideResponse",value:function(e){var t,n,i,s,o,a,l,c,d=this;this.instance.persistence&&this.instance.persistence.register((u(c={},Pe,!!e.sessionRecording),u(c,Ie,null===(o=e.sessionRecording)||void 0===o?void 0:o.consoleLogRecordingEnabled),u(c,Ce,null===(a=e.sessionRecording)||void 0===a?void 0:a.recorderVersion),u(c,Ee,r({capturePerformance:e.capturePerformance},null===(l=e.sessionRecording)||void 0===l?void 0:l.networkPayloadCapture)),c));var h=null===(t=e.sessionRecording)||void 0===t?void 0:t.sampleRate;this._sampleRate=C(h)||R(h)?null:parseFloat(h);var f,p=null===(n=e.sessionRecording)||void 0===n?void 0:n.minimumDurationMilliseconds;if(this._minimumDuration=C(p)?null:p,this._linkedFlag=(null===(i=e.sessionRecording)||void 0===i?void 0:i.linkedFlag)||null,null!==(s=e.sessionRecording)&&void 0!==s&&s.endpoint&&(this._endpoint=null===(f=e.sessionRecording)||void 0===f?void 0:f.endpoint),j(this._sampleRate)&&this.sessionManager.onSessionId((function(e){d.makeSamplingDecision(e)})),E(this._linkedFlag)){var g=this._linkedFlag;this.instance.onFeatureFlags((function(e){d._linkedFlagSeen=e.includes(g)}))}this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Q()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var e=this;if(!C(Object.assign)&&!this._captureStarted&&!this.instance.config.disable_session_recording){this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId();var t="v2"===this.recordingVersion?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.recordingVersion?re(this.instance.config.api_host+"/static/".concat(t,"?v=").concat(y.LIB_VERSION),(function(n){if(n)return q.error("Could not load ".concat(t),n);e._onScriptLoaded()})):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(e){var t;return 3===e.type&&-1!==Tt.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}},{key:"_updateWindowAndSessionIds",value:function(e){var t=this._isInteractiveEvent(e);if(t||this.isIdle||e.timestamp-this._lastActivityTimestamp>jt&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:jt})),t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),this._tryTakeFullSnapshot())),!this.isIdle){var n=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),i=n.windowId,r=n.sessionId,s=this.sessionId!==r,o=this.windowId!==i;-1===[wt,xt].indexOf(e.type)&&(o||s)&&this._tryTakeFullSnapshot(),this.windowId=i,this.sessionId=r}}},{key:"_tryRRwebMethod",value:function(e){if(!this._captureStarted)return!1;try{return e(),!0}catch(e){return q.error("[Session-Recording] using rrweb when not started.",e),!1}}},{key:"_tryAddCustomEvent",value:function(e,t){var n=this;return this._tryRRwebMethod((function(){var i;return null===(i=n.rrwebRecord)||void 0===i?void 0:i.addCustomEvent(e,t)}))}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRwebMethod((function(){var t;return null===(t=e.rrwebRecord)||void 0===t?void 0:t.takeFullSnapshot()}))}},{key:"_onScriptLoaded",value:function(){var e,t=this,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=N.rrweb?N.rrweb.record:N.rrwebRecord;for(var i=this.instance.config.session_recording,s=0,o=Object.entries(i||{});s<o.length;s++){var a=p(o[s],2),l=a[0],u=a[1];l in n&&(n[l]=u)}this.rrwebRecord?(this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new St(this.rrwebRecord,{onBlockedNode:function(e,n){var i="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");q.info(i,{node:n}),t.log("[PostHog Recorder] "+i,"warn")}}),this.stopRrweb=this.rrwebRecord(r({emit:function(e){t.onRRwebEmit(e)},plugins:this._gatherRRWebPlugins()},n)),this.instance._addCaptureHook((function(e){try{if("$pageview"===e){var n=N?t._maskUrl(N.location.href):"";if(!n)return;t._tryAddCustomEvent("$pageview",{href:n})}}catch(e){q.error("Could not add $pageview to rrweb session",e)}})),this._lastActivityTimestamp=Date.now(),this.isIdle=!1):q.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return D.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(D.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&P(D.getRecordNetworkPlugin)&&(!gt.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(D.getRecordNetworkPlugin(function(e,t){var n,i,s,o=e.session_recording,a=!1!==o.recordHeaders&&t.recordHeaders,l=!1!==o.recordBody&&t.recordBody,u=!1!==o.recordPerformance&&t.recordPerformance,c=(n=o,s=Math.min(1e6,null!==(i=n.payloadSizeLimitBytes)&&void 0!==i?i:1e6),function(e){return null!=e&&e.requestBody&&(e.requestBody=Et(e.requestBody,e.requestHeaders,s,"Request")),null!=e&&e.responseBody&&(e.responseBody=Et(e.responseBody,e.responseHeaders,s,"Response")),e}),d=function(e){return c(function(e){var t=_t(e.name);if(!(t&&t.pathname&&Ct.includes(t.pathname)))return e}((t=e,Object.keys(null!==(n=t.requestHeaders)&&void 0!==n?n:{}).forEach((function(e){var n;It.includes(e.toLowerCase())&&(null===(n=t.requestHeaders)||void 0===n||delete n[e])})),t)));var t,n},h=P(e.session_recording.maskNetworkRequestFn);return h&&P(e.session_recording.maskCapturedNetworkRequestFn)&&q.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),h&&(e.session_recording.maskCapturedNetworkRequestFn=function(t){var n=e.session_recording.maskNetworkRequestFn({url:t.name});return r(r({},t),{},{name:null==n?void 0:n.url})}),o.maskRequestFn=P(e.session_recording.maskCapturedNetworkRequestFn)?function(t){var n,i,r,s=d(t);return s&&null!==(n=null===(i=(r=e.session_recording).maskCapturedNetworkRequestFn)||void 0===i?void 0:i.call(r,s))&&void 0!==n?n:void 0}:void 0,o.maskRequestFn||(o.maskRequestFn=d),r(r(r({},Pt),o),{},{recordHeaders:a,recordBody:l,recordPerformance:u,recordInitialRequests:u})}(this.instance.config,this.networkPayloadCapture))):q.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(e&&I(e)){if(e.type===Ft.Meta){var t=this._maskUrl(e.data.href);if(!t)return;e.data.href=t}var n=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(n){var i=function(e){var t=e;if(t&&I(t)&&6===t.type&&I(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var n=[],i=0;i<t.data.payload.payload.length;i++)t.data.payload.payload[i]&&t.data.payload.payload[i].length>2e3?n.push(t.data.payload.payload[i].slice(0,2e3)+"...[truncated]"):n.push(t.data.payload.payload[i]);return t.data.payload.payload=n,e}return e}(n),r=JSON.stringify(i).length;if(this._updateWindowAndSessionIds(i),!this.isIdle){var s={$snapshot_bytes:r,$snapshot_data:i,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(s):this.clearBuffer()}}}}},{key:"_maskUrl",value:function(e){var t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var n,i={url:e};return null===(n=i=t.maskNetworkRequestFn(i))||void 0===n?void 0:n.url}return e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var t=this._minimumDuration,n=this.sessionDuration,i=j(n)&&n>=0,r=j(t)&&i&&n<t;return"buffering"===this.status||r?(this.flushBufferTimer=setTimeout((function(){e._flushBuffer()}),2e3),this.buffer||this.clearBuffer()):this.buffer&&0!==this.buffer.data.length?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var t,n=this,i=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),R(this.buffer.sessionId)&&!R(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout((function(){n._flushBuffer()}),2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{transport:"XHR",method:"POST",endpoint:this._endpoint,_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:e.$snapshot_data.type===wt}})}}]),e}(),Mt=function(){function e(t){o(this,e),this.instance=t,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return l(e,[{key:"call",value:function(){var e=this,t=te(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(Me),group_properties:this.instance.get_property(Oe),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request("".concat(this.instance.config.api_host,"/decide/?v=3"),{data:t,verbose:!0},{method:"POST"},(function(t){return e.parseDecideResponse(t)}))}},{key:"parseDecideResponse",value:function(e){var t,n=this;if(this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),0!==(null==e?void 0:e.status)){if(!$||!$.body)return q.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((function(){n.parseDecideResponse(e)}),500);this.instance.toolbar.afterDecideResponse(e),null===(t=this.instance.sessionRecording)||void 0===t||t.afterDecideResponse(e),Ue.afterDecideResponse(e,this.instance),this.instance._afterDecideResponse(e),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e);var i=null==N?void 0:N.extendPostHogWithSurveys;e.surveys&&!i&&re(this.instance.config.api_host+"/static/surveys.js",(function(e){if(e)return q.error("Could not load surveys script",e);N.extendPostHogWithSurveys(n.instance)}));var r=null==N?void 0:N.extendPostHogWithExceptionAutoCapture;if(e.autocaptureExceptions&&e.autocaptureExceptions&&C(r)&&re(this.instance.config.api_host+"/static/exception-autocapture.js",(function(t){if(t)return q.error("Could not load exception autocapture script",t);N.extendPostHogWithExceptionAutocapture(n.instance,e)})),e.siteApps)if(this.instance.config.opt_in_site_apps){var s,o=this.instance.config.api_host,a=m(e.siteApps);try{var l=function(){var e=s.value,t=e.id,i=e.url,r=[o,"/"===o[o.length-1]&&"/"===i[0]?i.substring(1):i].join("");D["__$$ph_site_app_".concat(t)]=n.instance,re(r,(function(e){e&&q.error("Error while initializing PostHog app with config id ".concat(t),e)}))};for(a.s();!(s=a.n()).done;)l()}catch(e){a.e(e)}finally{a.f()}}else e.siteApps.length>0&&q.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}else q.error("Failed to fetch feature flags from PostHog.")}}]),e}(),Ot=["https://app.posthog.com","https://eu.posthog.com"],Nt=["source"],At=null!=N&&N.location?mt(N.location.hash,"__posthog")||mt(location.hash,"state"):null,$t=function(){function e(t){o(this,e),this.instance=t}return l(e,[{key:"afterDecideResponse",value:function(e){var t=e.toolbarParams||e.editorParams||(e.toolbarVersion?{toolbarVersion:e.toolbarVersion}:{});e.isAuthenticated&&t.toolbarVersion&&0===t.toolbarVersion.indexOf("toolbar")&&this.loadToolbar(r({},t))}},{key:"maybeLoadToolbar",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!N||!$)return!1;n=null!==(e=n)&&void 0!==e?e:N.location,r=null!==(t=r)&&void 0!==t?t:N.history;try{if(!i){try{N.localStorage.setItem("test","test"),N.localStorage.removeItem("test")}catch(e){return!1}i=null==N?void 0:N.localStorage}var s,o=At||mt(n.hash,"__posthog")||mt(n.hash,"state"),a=o?J((function(){return JSON.parse(atob(decodeURIComponent(o)))}))||J((function(){return JSON.parse(decodeURIComponent(o))})):null;return a&&"ph_authorize"===a.action?((s=a).source="url",s&&Object.keys(s).length>0&&(a.desiredHash?n.hash=a.desiredHash:r?r.replaceState("",$.title,n.pathname+n.search):n.hash="")):((s=JSON.parse(i.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token||(this.loadToolbar(s),0))}catch(e){return!1}}},{key:"loadToolbar",value:function(e){var t=this;if(!N||D._postHogToolbarLoaded)return!1;D._postHogToolbarLoaded=!0;var n=this.instance.config.api_host,i=3e5,s=Math.floor(Date.now()/i)*i,o="".concat(n).concat(n.endsWith("/")?"":"/","static/toolbar.js?t=").concat(s),a=!Ot.includes(this.instance.config.api_host)&&this.instance.config.advanced_disable_toolbar_metrics,l=r(r({token:this.instance.config.token},e),{},{apiURL:n},a?{instrument:!1}:{});l.source;var u=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(l,Nt);return N.localStorage.setItem("_postHogToolbarParams",JSON.stringify(u)),re(o,(function(e){e?q.error("Failed to load toolbar",e):(D.ph_load_toolbar||D.ph_load_editor)(l,t.instance)})),ie(N,"turbolinks:load",(function(){D._postHogToolbarLoaded=!1,t.loadToolbar(l)})),!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}]),e}(),Bt="__ph_opt_in_out_";function Dt(e,t){Gt(!0,e,t)}function Ht(e,t){Gt(!1,e,t)}function qt(e,t){return"1"===zt(e,t)}function Ut(e,t){return!!function(e){if(e&&e.respectDnt){var t=e&&e.window||N,n=null==t?void 0:t.navigator,i=!1;return W([null==n?void 0:n.doNotTrack,n.msDoNotTrack,t.doNotTrack],(function(e){G([!0,1,"1","yes"],e)&&(i=!0)})),i}return!1}(t)||"0"===zt(e,t)}function Vt(e,t){Zt(t=t||{}).remove(Wt(e,t),!!t.crossSubdomainCookie)}function Zt(e){return"localStorage"===(e=e||{}).persistenceType?lt:"localStorage+cookie"===e.persistenceType?ct:ot}function Wt(e,t){return((t=t||{}).persistencePrefix||Bt)+e}function zt(e,t){return Zt(t).get(Wt(e,t))}function Gt(e,t,n){E(t)&&t.length?(Zt(n=n||{}).set(Wt(t,n),e?1:0,j(n.cookieExpiration)?n.cookieExpiration:null,n.crossSubdomainCookie,n.secureCookie),n.capture&&e&&n.capture(n.captureEventName||"$opt_in",n.captureProperties||{},{send_instantly:!0})):q.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}var Yt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;o(this,e),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=t}return l(e,[{key:"setPollInterval",value:function(e){this._pollInterval=e,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return(new Date).getTime()}}]),e}(),Qt=function(e){c(n,Yt);var t=f(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return o(this,n),(i=t.call(this,r)).handlePollRequest=e,i}return l(n,[{key:"enqueue",value:function(e,t,n){this._event_queue.push({url:e,data:t,options:n}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var e=this;clearTimeout(this._poller),this._poller=setTimeout((function(){if(e._event_queue.length>0){var t=e.formatQueue(),n=function(n){var i=t[n],r=i.url,s=i.data,o=i.options;W(s,(function(t,n){s[n].offset=Math.abs(s[n].timestamp-e.getTime()),delete s[n].timestamp})),e.handlePollRequest(r,s,o)};for(var i in t)n(i);e._event_queue.length=0,e._empty_queue_count=0}else e._empty_queue_count++;e._empty_queue_count>4&&(e.isPolling=!1,e._empty_queue_count=0),e.isPolling&&e.poll()}),this._pollInterval)}},{key:"unload",value:function(){var e=this;clearTimeout(this._poller);var t=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var n=Object.values(t);[].concat(g(n.filter((function(e){return 0===e.url.indexOf("/e")}))),g(n.filter((function(e){return 0!==e.url.indexOf("/e")})))).map((function(t){var n=t.url,i=t.data,s=t.options;e.handlePollRequest(n,i,r(r({},s),{},{transport:"sendBeacon"}))}))}},{key:"formatQueue",value:function(){var e={};return W(this._event_queue,(function(t){var n=t.url,i=t.data,r=t.options,s=(r?r._batchKey:null)||n;C(e[s])&&(e[s]={data:[],url:n,options:r}),r&&e[s].options&&e[s].options._metrics&&!e[s].options._metrics.rrweb_full_snapshot&&(e[s].options._metrics.rrweb_full_snapshot=r._metrics.rrweb_full_snapshot),e[s].data.push(i)})),e}}]),n}(),Jt=Uint8Array,Xt=Uint16Array,Kt=Uint32Array,en=new Jt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tn=new Jt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nn=new Jt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rn=function(e,t){for(var n=new Xt(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new Kt(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},sn=rn(en,2),on=sn[0],an=sn[1];on[28]=258,an[258]=28;for(var ln=rn(tn,0)[1],un=new Xt(32768),cn=0;cn<32768;++cn){var dn=(43690&cn)>>>1|(21845&cn)<<1;dn=(61680&(dn=(52428&dn)>>>2|(13107&dn)<<2))>>>4|(3855&dn)<<4,un[cn]=((65280&dn)>>>8|(255&dn)<<8)>>>1}var hn=function(e,t,n){for(var i=e.length,r=0,s=new Xt(t);r<i;++r)++s[e[r]-1];var o,a=new Xt(t);for(r=0;r<t;++r)a[r]=a[r-1]+s[r-1]<<1;if(n){o=new Xt(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var u=r<<4|e[r],c=t-e[r],d=a[e[r]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)o[un[d]>>>l]=u}else for(o=new Xt(i),r=0;r<i;++r)o[r]=un[a[e[r]-1]++]>>>15-e[r];return o},fn=new Jt(288);for(cn=0;cn<144;++cn)fn[cn]=8;for(cn=144;cn<256;++cn)fn[cn]=9;for(cn=256;cn<280;++cn)fn[cn]=7;for(cn=280;cn<288;++cn)fn[cn]=8;var pn=new Jt(32);for(cn=0;cn<32;++cn)pn[cn]=5;var gn,_n=hn(fn,9,0),vn=hn(pn,5,0),mn=function(e){return(e/8>>0)+(7&e&&1)},yn=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var i=new(e instanceof Xt?Xt:e instanceof Kt?Kt:Jt)(n-t);return i.set(e.subarray(t,n)),i},bn=function(e,t,n){n<<=7&t;var i=t/8>>0;e[i]|=n,e[i+1]|=n>>>8},kn=function(e,t,n){n<<=7&t;var i=t/8>>0;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},wn=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,s=n.slice();if(!r)return[new Jt(0),0];if(1==r){var o=new Jt(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=r-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var f=new Xt(h+1),p=xn(n[c-1],f,0);if(p>t){i=0;var g=0,_=p-t,v=1<<_;for(s.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));i<r;++i){var m=s[i].s;if(!(f[m]>t))break;g+=v-(1<<p-f[m]),f[m]=t}for(g>>>=_;g>0;){var y=s[i].s;f[y]<t?g-=1<<t-f[y]++-1:++i}for(;i>=0&&g;--i){var b=s[i].s;f[b]==t&&(--f[b],++g)}p=t}return[new Jt(f),p]},xn=function e(t,n,i){return-1==t.s?Math.max(e(t.l,n,i+1),e(t.r,n,i+1)):n[t.s]=i},Sn=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Xt(++t),i=0,r=e[0],s=1,o=function(e){n[i++]=e},a=1;a<=t;++a)if(e[a]==r&&a!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=e[a]}return[n.subarray(0,i),t]},Fn=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},Pn=function(e,t,n){var i=n.length,r=mn(t+2);e[r]=255&i,e[r+1]=i>>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var s=0;s<i;++s)e[r+s+4]=n[s];return 8*(r+4+i)},In=function(e,t,n,i,r,s,o,a,l,u,c){bn(t,c++,n),++r[256];for(var d=wn(r,15),h=d[0],f=d[1],p=wn(s,15),g=p[0],_=p[1],v=Sn(h),m=v[0],y=v[1],b=Sn(g),k=b[0],w=b[1],x=new Xt(19),S=0;S<m.length;++S)x[31&m[S]]++;for(S=0;S<k.length;++S)x[31&k[S]]++;for(var F=wn(x,7),P=F[0],I=F[1],C=19;C>4&&!P[nn[C-1]];--C);var E,R,j,T,L=u+5<<3,M=Fn(r,fn)+Fn(s,pn)+o,O=Fn(r,h)+Fn(s,g)+o+14+3*C+Fn(x,P)+(2*x[16]+3*x[17]+7*x[18]);if(L<=M&&L<=O)return Pn(t,c,e.subarray(l,l+u));if(bn(t,c,1+(O<M)),c+=2,O<M){E=hn(h,f,0),R=h,j=hn(g,_,0),T=g;var N=hn(P,I,0);for(bn(t,c,y-257),bn(t,c+5,w-1),bn(t,c+10,C-4),c+=14,S=0;S<C;++S)bn(t,c+3*S,P[nn[S]]);c+=3*C;for(var A=[m,k],$=0;$<2;++$){var B=A[$];for(S=0;S<B.length;++S){var D=31&B[S];bn(t,c,N[D]),c+=P[D],D>15&&(bn(t,c,B[S]>>>5&127),c+=B[S]>>>12)}}}else E=_n,R=fn,j=vn,T=pn;for(S=0;S<a;++S)if(i[S]>255){D=i[S]>>>18&31,kn(t,c,E[D+257]),c+=R[D+257],D>7&&(bn(t,c,i[S]>>>23&31),c+=en[D]);var H=31&i[S];kn(t,c,j[H]),c+=T[H],H>3&&(kn(t,c,i[S]>>>5&8191),c+=tn[H])}else kn(t,c,E[i[S]]),c+=R[i[S]];return kn(t,c,E[256]),c+R[256]},Cn=new Kt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),En=new Jt(0),Rn=function(){for(var e=new Kt(256),t=0;t<256;++t){for(var n=t,i=9;--i;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),jn=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Tn(e,t){void 0===t&&(t={});var n=function(){var e=4294967295;return{p:function(t){for(var n=e,i=0;i<t.length;++i)n=Rn[255&n^t[i]]^n>>>8;e=n},d:function(){return 4294967295^e}}}(),i=e.length;n.p(e);var r=function(e,t,n,i,r){return function(e,t,n,i,r,s){var o=e.length,a=new Jt(i+o+5*(1+Math.floor(o/7e3))+r),l=a.subarray(i,a.length-r),u=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var d=c+65535;d<o?u=Pn(l,u,e.subarray(c,d)):(l[c]=s,u=Pn(l,u,e.subarray(c,o)))}else{for(var h=Cn[t-1],f=h>>>13,p=8191&h,g=(1<<n)-1,_=new Xt(32768),v=new Xt(g+1),m=Math.ceil(n/3),y=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<y)&g},k=new Kt(25e3),w=new Xt(288),x=new Xt(32),S=0,F=0,P=(c=0,0),I=0,C=0;c<o;++c){var E=b(c),R=32767&c,j=v[E];if(_[R]=j,v[E]=R,I<=c){var T=o-c;if((S>7e3||P>24576)&&T>423){u=In(e,l,0,k,w,x,F,P,C,c-C,u),P=S=F=0,C=c;for(var L=0;L<286;++L)w[L]=0;for(L=0;L<30;++L)x[L]=0}var M=2,O=0,N=p,A=R-j&32767;if(T>2&&E==b(c-A))for(var $=Math.min(f,T)-1,B=Math.min(32767,c),D=Math.min(258,T);A<=B&&--N&&R!=j;){if(e[c+M]==e[c+M-A]){for(var H=0;H<D&&e[c+H]==e[c+H-A];++H);if(H>M){if(M=H,O=A,H>$)break;var q=Math.min(A,H-2),U=0;for(L=0;L<q;++L){var V=c-A+L+32768&32767,Z=V-_[V]+32768&32767;Z>U&&(U=Z,j=V)}}}A+=(R=j)-(j=_[R])+32768&32767}if(O){k[P++]=268435456|an[M]<<18|ln[O];var W=31&an[M],z=31&ln[O];F+=en[W]+tn[z],++w[257+W],++x[z],I=c+M,++S}else k[P++]=e[c],++w[e[c]]}}u=In(e,l,s,k,w,x,F,P,C,c-C,u),s||(u=Pn(l,u,En))}return yn(a,0,i+mn(u)+r)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,i,!r)}(e,t,function(e){return 10+(e.filename&&e.filename.length+1||0)}(t),8),s=r.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&jn(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var i=0;i<=n.length;++i)e[i+10]=n.charCodeAt(i)}}(r,t),jn(r,s-8,n.d()),jn(r,s-4,i),r}function Ln(e,t){var n=e.length;if(!t&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var i=new Jt(e.length+(e.length>>>1)),r=0,s=function(e){i[r++]=e},o=0;o<n;++o){if(r+5>i.length){var a=new Jt(r+8+(n-o<<1));a.set(i),i=a}var l=e.charCodeAt(o);l<128||t?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return yn(i,0,r)}!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(gn||(gn={}));var Mn=function(e,t,n){var i=t||{};i.ip=n.ip?1:0,i._=(new Date).getTime().toString(),i.ver=y.LIB_VERSION;var r=e.split("?");if(r.length>1){var s,o=m(r[1].split("&"));try{for(o.s();!(s=o.n()).done;){var a=s.value.split("=")[0];C(i[a])||delete i[a]}}catch(e){o.e(e)}finally{o.f()}}var l=e.indexOf("?")>-1?"&":"?";return e+l+function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",r=[];return W(e,(function(e,i){C(e)||C(i)||"undefined"===i||(t=encodeURIComponent(e.toString()),n=encodeURIComponent(i),r[r.length]=n+"="+t)})),r.join(i)}(i)},On=function e(t,n){if(n.blob&&t.buffer)return new Blob([F(t)?t:t.buffer],{type:"text/plain"});if(n.sendBeacon||n.blob){var i=e(t,{method:"POST"});return new Blob([i],{type:"application/x-www-form-urlencoded"})}return"POST"!==n.method?null:(r=S(t)||F(t)?"data="+encodeURIComponent(t):"data="+encodeURIComponent(t.data),"compression"in t&&t.compression&&(r+="&compression="+t.compression),r);var r},Nn=function(e){var t=e.url,n=e.data,i=e.headers,r=e.options,s=e.callback,o=e.retriesPerformedSoFar,a=e.retryQueue,l=e.onXHRError,u=e.timeout,c=void 0===u?6e4:u,d=e.onResponse;j(o)&&o>0&&(t=Mn(t,{retry_count:o},{}));var h=new XMLHttpRequest;h.open(r.method||"GET",t,!0);var f=On(n,r);W(i,(function(e,t){h.setRequestHeader(t,e)})),"POST"!==r.method||r.blob||h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.timeout=c,h.withCredentials=!0,h.onreadystatechange=function(){if(4===h.readyState)if(null==d||d(h),200===h.status){if(s){var e;try{e=JSON.parse(h.responseText)}catch(e){return void q.error(e)}s(e)}}else P(l)&&l(h),(h.status<400||h.status>500)&&a.enqueue({url:t,data:n,options:r,headers:i,retriesPerformedSoFar:(o||0)+1,callback:s}),null==s||s({status:0})},h.send(f)},An=function(e){c(n,Yt);var t=f(n);function n(e,i){var r;return o(this,n),(r=t.call(this)).isPolling=!1,r.queue=[],r.areWeOnline=!0,r.onXHRError=e,r.rateLimiter=i,!C(N)&&"onLine"in N.navigator&&(r.areWeOnline=N.navigator.onLine,N.addEventListener("online",(function(){r._handleWeAreNowOnline()})),N.addEventListener("offline",(function(){r.areWeOnline=!1}))),r}return l(n,[{key:"enqueue",value:function(e){var t=e.retriesPerformedSoFar||0;if(!(t>=10)){var n=function(e){var t=3e3*Math.pow(2,e),n=t/2,i=Math.min(18e5,t),r=(Math.random()-.5)*(i-n);return Math.ceil(i+r)}(t),i=new Date(Date.now()+n);this.queue.push({retryAt:i,requestData:e});var r="Enqueued failed request for retry in ".concat(n);navigator.onLine||(r+=" (Browser is offline)"),q.warn(r),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var e=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout((function(){e.areWeOnline&&e.queue.length>0&&e.flush(),e.poll()}),this._pollInterval)}},{key:"flush",value:function(){var e=new Date(Date.now()),t=this.queue.filter((function(t){return t.retryAt<e}));if(t.length>0){this.queue=this.queue.filter((function(t){return t.retryAt>=e}));var n,i=m(t);try{for(i.s();!(n=i.n()).done;){var r=n.value.requestData;this._executeXhrRequest(r)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var e,t=m(this.queue);try{for(t.s();!(e=t.n()).done;){var n=e.value.requestData,i=n.url,s=n.data,o=n.options;if(this.rateLimiter.isRateLimited(o._batchKey))q.warn("[RetryQueue] is quota limited. Dropping request.");else try{null==N||N.navigator.sendBeacon(i,On(s,r(r({},o),{},{sendBeacon:!0})))}catch(e){q.error(e)}}}catch(e){t.e(e)}finally{t.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(e){var t=e.url,n=e.data,i=e.options,r=e.headers,s=e.callback,o=e.retriesPerformedSoFar;this.rateLimiter.isRateLimited(i._batchKey)||Nn({url:t,data:n||{},options:i||{},headers:r||{},retriesPerformedSoFar:o||0,callback:s,retryQueue:this,onXHRError:this.onXHRError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),n}(),$n=1800,Bn=function(){function e(t,n,i,r){o(this,e),u(this,"_sessionIdChangedHandlers",[]),this.config=t,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||tt,this._windowIdGenerator=r||tt;var s=t.persistence_name||t.token,a=t.session_idle_timeout_seconds||$n;if(j(a)?a>$n?q.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):a<60&&q.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(q.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),a=$n),this._sessionTimeoutMs=1e3*Math.min(Math.max(a,60),$n),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var l=pt.parse(this._window_id_storage_key),c=pt.parse(this._primary_window_exists_storage_key);l&&!c?this._windowId=l:pt.remove(this._window_id_storage_key),pt.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return l(e,[{key:"onSessionId",value:function(e){var t=this;return C(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){t._sessionIdChangedHandlers=t._sessionIdChangedHandlers.filter((function(t){return t!==e}))}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&pt.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&pt.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?pt.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,t,n){e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register(u({},Re,[t,e,n])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Re];return S(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;null==N||N.addEventListener("beforeunload",(function(){e._canUseSessionStorage()&&pt.remove(e._primary_window_exists_storage_key)}))}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),n=p(this._getSessionId(),3),i=n[0],r=n[1],s=n[2],o=this._getWindowId(),a=s&&s>0&&Math.abs(t-s)>864e5,l=!1,u=!r,c=!e&&Math.abs(t-i)>this._sessionTimeoutMs;u||c||a?(r=this._sessionIdGenerator(),o=this._windowIdGenerator(),s=t,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=0===i||!e||a?t:i,h=0===s?(new Date).getTime():s;return this._setWindowId(o),this._setSessionId(r,d,h),l&&this._sessionIdChangedHandlers.forEach((function(e){return e(r,o)})),{sessionId:r,windowId:o,sessionStartTimestamp:h}}}]),e}(),Dn=l((function e(t,n,i,r){o(this,e),this.name="posthog-js",this.setupOnce=function(e){e((function(e){var s,o,a,l,u;if("error"!==e.level||!t.__loaded)return e;e.tags||(e.tags={});var c=t.config.ui_host||t.config.api_host;e.tags["PostHog Person URL"]=c+"/person/"+t.get_distinct_id(),t.sessionRecordingStarted()&&(e.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var d=(null===(s=e.exception)||void 0===s?void 0:s.values)||[],h={$exception_message:null===(o=d[0])||void 0===o?void 0:o.value,$exception_type:null===(a=d[0])||void 0===a?void 0:a.type,$exception_personURL:c+"/person/"+t.get_distinct_id(),$sentry_event_id:e.event_id,$sentry_exception:e.exception,$sentry_exception_message:null===(l=d[0])||void 0===l?void 0:l.value,$sentry_exception_type:null===(u=d[0])||void 0===u?void 0:u.type,$sentry_tags:e.tags};return n&&i&&(h.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+e.event_id),t.capture("$exception",h),e}))}})),Hn=function(){function e(){var t=this;o(this,e),u(this,"_hasSeenPageView",!1),u(this,"_updateScrollData",(function(){var e,n,i,r;t._pageViewData||(t._pageViewData=t._createPageViewData());var s=t._pageViewData,o=t._scrollY(),a=t._scrollHeight(),l=t._contentY(),u=t._contentHeight();s.lastScrollY=o,s.maxScrollY=Math.max(o,null!==(e=s.maxScrollY)&&void 0!==e?e:0),s.maxScrollHeight=Math.max(a,null!==(n=s.maxScrollHeight)&&void 0!==n?n:0),s.lastContentY=l,s.maxContentY=Math.max(l,null!==(i=s.maxContentY)&&void 0!==i?i:0),s.maxContentHeight=Math.max(u,null!==(r=s.maxContentHeight)&&void 0!==r?r:0)}))}return l(e,[{key:"_createPageViewData",value:function(){var e;return{pathname:null!==(e=null==N?void 0:N.location.pathname)&&void 0!==e?e:""}}},{key:"doPageView",value:function(){var e,t;return this._hasSeenPageView?(t=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,t=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),r({$prev_pageview_pathname:null===(e=t)||void 0===e?void 0:e.pathname},this._calculatePrevPageScrollProperties(t))}},{key:"doPageLeave",value:function(){var e=this._pageViewData;return r({$prev_pageview_pathname:null==e?void 0:e.pathname},this._calculatePrevPageScrollProperties(e))}},{key:"_calculatePrevPageScrollProperties",value:function(e){if(!e||null==e.maxScrollHeight||null==e.lastScrollY||null==e.maxScrollY||null==e.maxContentHeight||null==e.lastContentY||null==e.maxContentY)return{};var t=e.maxScrollHeight,n=e.lastScrollY,i=e.maxScrollY,r=e.maxContentHeight,s=e.lastContentY,o=e.maxContentY;return t=Math.ceil(t),n=Math.ceil(n),i=Math.ceil(i),r=Math.ceil(r),s=Math.ceil(s),o=Math.ceil(o),{$prev_pageview_last_scroll:n,$prev_pageview_last_scroll_percentage:t<=1?1:qn(n/t,0,1),$prev_pageview_max_scroll:i,$prev_pageview_max_scroll_percentage:t<=1?1:qn(i/t,0,1),$prev_pageview_last_content:s,$prev_pageview_last_content_percentage:r<=1?1:qn(s/r,0,1),$prev_pageview_max_content:o,$prev_pageview_max_content_percentage:r<=1?1:qn(o/r,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){null==N||N.addEventListener("scroll",this._updateScrollData),null==N||N.addEventListener("scrollend",this._updateScrollData),null==N||N.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){null==N||N.removeEventListener("scroll",this._updateScrollData),null==N||N.removeEventListener("scrollend",this._updateScrollData),null==N||N.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollHeight",value:function(){return N?Math.max(0,N.document.documentElement.scrollHeight-N.document.documentElement.clientHeight):0}},{key:"_scrollY",value:function(){return N&&(N.scrollY||N.pageYOffset||N.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){return(null==N?void 0:N.document.documentElement.scrollHeight)||0}},{key:"_contentY",value:function(){var e=(null==N?void 0:N.document.documentElement.clientHeight)||0;return this._scrollY()+e}}]),e}();function qn(e,t,n){return Math.max(t,Math.min(e,n))}var Un,Vn,Zn,Wn={icontains:function(e){return!!N&&N.location.href.toLowerCase().indexOf(e.toLowerCase())>-1},regex:function(e){return!!N&&function(e,t){return!!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t)&&new RegExp(t).test(e)}(N.location.href,e)},exact:function(e){return(null==N?void 0:N.location.href)===e}},zn=function(){function e(t){o(this,e),this.instance=t}return l(e,[{key:"getSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.instance.get_property(Ne);if(i&&!n)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/surveys/?token=").concat(this.instance.config.token),{},{method:"GET"},(function(n){var i,r=n.surveys||[];return null===(i=t.instance.persistence)||void 0===i||i.register(u({},Ne,r)),e(r)}))}},{key:"getActiveMatchingSurveys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys((function(n){var i=n.filter((function(e){return!(!e.start_date||e.end_date)})).filter((function(e){var t,n,i,r;if(!e.conditions)return!0;var s=null===(t=e.conditions)||void 0===t||!t.url||Wn[null!==(n=null===(i=e.conditions)||void 0===i?void 0:i.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url),o=null===(r=e.conditions)||void 0===r||!r.selector||(null==$?void 0:$.querySelector(e.conditions.selector));return s&&o})).filter((function(e){if(!e.linked_flag_key&&!e.targeting_flag_key)return!0;var n=!e.linked_flag_key||t.instance.featureFlags.isFeatureEnabled(e.linked_flag_key),i=!e.targeting_flag_key||t.instance.featureFlags.isFeatureEnabled(e.targeting_flag_key);return n&&i}));return e(i)}),n)}}]),e}(),Gn=function(){function e(){var t=this;o(this,e),u(this,"limits",{}),u(this,"checkForLimiting",(function(e){try{var n=e.responseText;if(!n||!n.length)return;(JSON.parse(n).quota_limited||[]).forEach((function(e){q.info("[RateLimiter] ".concat(e||"events"," is quota limited.")),t.limits[e]=(new Date).getTime()+6e4}))}catch(e){return void q.error(e)}}))}return l(e,[{key:"isRateLimited",value:function(e){var t=this.limits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}]),e}(),Yn=function(){return r({initialPathName:(null==N?void 0:N.location.pathname)||"",referringDomain:yt.referringDomain()},yt.campaignParams())},Qn=function(){function e(t,n,i){var r=this;o(this,e),u(this,"_onSessionIdCallback",(function(e){var t=r._getStoredProps();if(!t||t.sessionId!==e){var n={sessionId:e,props:r._sessionSourceParamGenerator()};r._persistence.register(u({},De,n))}})),this._sessionIdManager=t,this._persistence=n,this._sessionSourceParamGenerator=i||Yn,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return l(e,[{key:"_getStoredProps",value:function(){return this._persistence.props[De]}},{key:"getSessionProps",value:function(){var e,t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}]),e}(),Jn=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],Xn=function(e,t){if(!e)return!1;var n=e.toLowerCase();return Jn.concat(t||[]).some((function(e){var t=e.toLowerCase();return n.includes?n.includes(t):-1!==n.indexOf(t)}))};!function(e){e[e.INIT_MODULE=0]="INIT_MODULE",e[e.INIT_SNIPPET=1]="INIT_SNIPPET"}(Un||(Un={}));var Kn=function(){},ei={},ti="posthog",ni=(null==N?void 0:N.XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest,ii=!ni&&-1===(null==B?void 0:B.indexOf("MSIE"))&&-1===(null==B?void 0:B.indexOf("Mozilla")),ri=function(){var e,t,n;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(t=null==$?void 0:$.location,n=null==t?void 0:t.hostname,!!E(n)&&"herokuapp.com"!==n.split(".").slice(-2).join(".")),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:Kn,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==N||null===(e=N.location)||void 0===e?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(e){var t="Bad HTTP status: "+e.status+" "+e.statusText;q.error(t)},get_device_id:function(e){return e},_onCapture:Kn,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},si=function(e,t,n,i){var r,s=n!==ti&&Zn?n?Zn[n]:void 0:Zn,o={initComplete:!1,syncCode:!1},a=function(e){return function(t){o[e]||(o[e]=!0,o.initComplete&&o.syncCode&&(null==i||i(t)))}};if(s&&Vn===Un.INIT_MODULE)r=s;else{if(s&&!S(s))return void q.error("You have already initialized "+n);r=new ai}return r._init(e,t,n,a("initComplete")),r.toolbar.maybeLoadToolbar(),r.sessionRecording=new Lt(r),r.sessionRecording.startRecordingIfEnabled(),r.config.__preview_measure_pageview_stats&&r.pageViewManager.startMeasuringScrollPosition(),r.__autocapture=r.config.autocapture,Ue._setIsAutocaptureEnabled(r),Ue._isAutocaptureEnabled&&(r.__autocapture=r.config.autocapture,Ue.enabledForProject(r.config.token,100,100)?Ue.isBrowserSupported()?Ue.init(r):(r.__autocapture=!1,q.info("Disabling Automatic Event Collection because this browser is not supported")):(r.__autocapture=!1,q.info("Not in active bucket: disabling Automatic Event Collection."))),y.DEBUG=y.DEBUG||r.config.debug,!C(s)&&S(s)&&(r._execute_array.call(r.people,s.people),r._execute_array(s)),a("syncCode")(r),r},oi=function(){function e(){o(this,e),u(this,"__forceAllowLocalhost",!1)}return l(e,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){q.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),e}(),ai=function(){function e(){var t=this;o(this,e),u(this,"webPerformance",new oi),this.config=ri(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=Dn,this.segmentIntegration=function(){return function(e){Promise&&Promise.resolve||q.warn("This browser does not have Promise support, and can not use the segment integration");var t=function(t,n){t.event.userId||t.event.anonymousId===e.get_distinct_id()||e.reset(),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(e.register({distinct_id:t.event.userId}),e.reloadFeatureFlags());var i=e._calculate_event_properties(n,t.event.properties);return t.event.properties=Object.assign({},i,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(e){return t(e,e.event.event)},page:function(e){return t(e,"$pageview")},identify:function(e){return t(e,"$identify")},screen:function(e){return t(e,"$screen")}}}(t)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new Ge(this),this.toolbar=new $t(this),this.pageViewManager=new Hn,this.surveys=new zn(this),this.rateLimiter=new Gn,this.people={set:function(e,n,i){var r=E(e)?u({},e,n):e;t.setPersonProperties(r),null==i||i({})},set_once:function(e,n,i){var r=E(e)?u({},e,n):e;t.setPersonProperties(void 0,r),null==i||i({})}}}return l(e,[{key:"init",value:function(e,t,n){if(C(n))q.critical("You must name your new library: init(token, config, name)");else{if(n!==ti){var i=si(e,t,n,(function(e){Zn[n]=e,e._loaded()}));return Zn[n]=i,i}q.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(e){var t,n,i,s=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var u,c={segmentRegister:!1,syncCode:!1},d=function(e){return function(){c[e]||(c[e]=!0,c.segmentRegister&&c.syncCode&&(null==l||l(s)))}};if(this.set_config(z({},ri(),o,{name:a,token:e,callback_fn:(a===ti?a:ti+"."+a)+"._jsc"})),this._jsc=function(){},(null!=N&&null!==(t=N.rrweb)&&void 0!==t&&t.record||null!=N&&N.rrwebRecord)&&(this.__loaded_recorder_version=null==N||null===(u=N.rrweb)||void 0===u?void 0:u.version),this.persistence=new kt(this.config),this._requestQueue=new Qt(this._handle_queued_event.bind(this)),this._retryQueue=new An(this.config.on_xhr_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new Bn(this.config,this.persistence),this.sessionPropsManager=new Qn(this.sessionManager,this.persistence),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new kt(r(r({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),o.segment?(this.config.get_device_id=function(){return o.segment.user().anonymousId()},o.segment.user().id()&&(this.register({distinct_id:o.segment.user().id()}),this.persistence.set_user_state("identified")),o.segment.register(this.segmentIntegration()).then(d("segmentRegister"))):d("segmentRegister")(),void 0!==(null===(n=o.bootstrap)||void 0===n?void 0:n.distinctID)){var h,f,p=this.config.get_device_id(tt()),g=null!==(h=o.bootstrap)&&void 0!==h&&h.isIdentifiedID?p:o.bootstrap.distinctID;this.persistence.set_user_state(null!==(f=o.bootstrap)&&void 0!==f&&f.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:o.bootstrap.distinctID,$device_id:g})}if(this._hasBootstrappedFeatureFlags()){var _,v,m=Object.keys((null===(_=o.bootstrap)||void 0===_?void 0:_.featureFlags)||{}).filter((function(e){var t,n;return!(null===(t=o.bootstrap)||void 0===t||null===(n=t.featureFlags)||void 0===n||!n[e])})).reduce((function(e,t){var n,i;return e[t]=(null===(n=o.bootstrap)||void 0===n||null===(i=n.featureFlags)||void 0===i?void 0:i[t])||!1,e}),{}),y=Object.keys((null===(v=o.bootstrap)||void 0===v?void 0:v.featureFlagPayloads)||{}).filter((function(e){return m[e]})).reduce((function(e,t){var n,i,r,s;return null!==(n=o.bootstrap)&&void 0!==n&&null!==(i=n.featureFlagPayloads)&&void 0!==i&&i[t]&&(e[t]=null===(r=o.bootstrap)||void 0===r||null===(s=r.featureFlagPayloads)||void 0===s?void 0:s[t]),e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:y})}if(!this.get_distinct_id()){var b=this.config.get_device_id(tt());this.register_once({distinct_id:b,$device_id:b},""),this.persistence.set_user_state("anonymous")}null==N||null===(i=N.addEventListener)||void 0===i||i.call(N,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),d("syncCode")()}},{key:"_afterDecideResponse",value:function(e){var t;if(this.compression={},e.supportedCompression&&!this.config.disable_compression){var n,i={},r=m(e.supportedCompression);try{for(r.s();!(n=r.n()).done;)i[n.value]=!0}catch(e){r.e(e)}finally{r.f()}this.compression=i}null!==(t=e.analytics)&&void 0!==t&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),e.elementsChainAsString&&(this.elementsChainAsString=e.elementsChainAsString)}},{key:"_loaded",value:function(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(e){q.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&$&&this.capture("$pageview",{title:$.title},{send_instantly:!0}),e||(new Mt(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.poll())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||Z(this.__request_queue,(function(t){e._send_request.apply(e,g(t))})),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(e,t){if(C(e))return null;if(ni)return function(n){e(n,t)};var n=this._jsc,i=""+Math.floor(1e8*Math.random()),r=this.config.callback_fn+"["+i+"]";return n[i]=function(r){delete n[i],e(r,t)},r}},{key:"_handle_unload",value:function(){var e,t;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(e,t,n){var i=JSON.stringify(t);this.__compress_and_send_json_request(e,i,n||ei,Kn)}},{key:"__compress_and_send_json_request",value:function(e,t,n,i){var s=function(e,t,n){return e===gn.GZipJS?[Tn(Ln(t),{mtime:0}),r(r({},n),{},{blob:!0,urlQueryArgs:{compression:gn.GZipJS}})]:[{data:te(t)},n]}(this.compression[gn.GZipJS]?gn.GZipJS:gn.Base64,t,n),o=p(s,2),a=o[0],l=o[1];this._send_request(e,a,l,i)}},{key:"_send_request",value:function(e,t,n,i){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(n._batchKey))if(ii)this.__request_queue.push([e,t,n,i]);else{var s={method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose};n=z(s,n||{}),ni||(n.method="GET");var o=N&&"sendBeacon"in N.navigator&&"sendBeacon"===n.transport;if(e=Mn(e,n.urlQueryArgs||{},{ip:this.config.ip}),o)try{null==N||N.navigator.sendBeacon(e,On(t,r(r({},n),{},{sendBeacon:!0})))}catch(e){}else if(ni||!$)try{Nn({url:e,data:t,headers:this.config.xhr_headers,options:n,callback:i,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.config.on_xhr_error,onResponse:this.rateLimiter.checkForLimiting})}catch(e){q.error(e)}else{var a,l=$.createElement("script");l.type="text/javascript",l.async=!0,l.defer=!0,l.src=e;var u=$.getElementsByTagName("script")[0];null===(a=u.parentNode)||void 0===a||a.insertBefore(l,u)}}}},{key:"_execute_array",value:function(e){var t,n=this,i=[],r=[],s=[];Z(e,(function(e){e&&(t=e[0],S(t)?s.push(e):P(e)?e.call(n):S(e)&&"alias"===t?i.push(e):S(e)&&-1!==t.indexOf("capture")&&P(n[t])?s.push(e):r.push(e))}));var o=function(e,t){Z(e,(function(e){if(S(e[0])){var n=t;W(e,(function(e){n=n[e[0]].apply(n,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};o(i,this),o(r,this),o(s,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ei;if(!this.__loaded||!this.sessionPersistence||!this._requestQueue)return q.uninitializedWarning("posthog.capture");if(!function(e){var t=!1;try{var n=e.config.token,i=e.config.respect_dnt,r=e.config.opt_out_capturing_persistence_type,s=e.config.opt_out_capturing_cookie_prefix||void 0,o=e.config.window;n&&(t=Ut(n,{respectDnt:i,persistenceType:r,persistencePrefix:s,window:o}))}catch(e){q.error("Unexpected error when checking capturing opt-out status: "+e)}return t}(this)){var i=(n=n||ei).transport;if(i&&(n.transport=i),!C(e)&&E(e)){if(!B||this.config.opt_out_useragent_filter||!Xn(B,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info();var s={uuid:tt(),event:e,properties:this._calculate_event_properties(e,t||{})};"$identify"===e&&(s.$set=n.$set,s.$set_once=n.$set_once),(s=function(e,t){return n=e,i=function(e,n){return n&&ee.indexOf(n)>-1?e:E(e)&&!R(t)?e.slice(0,t):e},r=new Set,function e(t,n){return t!==Object(t)?i?i(t,n):t:r.has(t)?void 0:(r.add(t),S(t)?(s=[],Z(t,(function(t){s.push(e(t))}))):(s={},W(t,(function(t,n){r.has(t)||(s[n]=e(t,n))}))),s);var s}(n);var n,i,r}(s,n._noTruncate?null:this.config.properties_string_max_length)).timestamp=n.timestamp||new Date;var o=r(r({},s.properties.$set),s.$set);(function(e){if(I(e)){for(var t in e)if(w.call(e,t))return!1;return!0}return!1})(o)||this.setPersonPropertiesForFlags(o),q.info("send",s);var a=JSON.stringify(s),l=this.config.api_host+(n.endpoint||this.analyticsDefaultEndpoint),u=n!==ei;return!this.config.request_batching||u&&!n._batchKey||n.send_instantly?this.__compress_and_send_json_request(l,a,n):this._requestQueue.enqueue(l,s,n),this._invokeCaptureHooks(e,s),s}}else q.error("No event name provided to posthog.capture")}}},{key:"_addCaptureHook",value:function(e){this.__captureHooks.push(e)}},{key:"_invokeCaptureHooks",value:function(e,t){this.config._onCapture(e,t),W(this.__captureHooks,(function(t){return t(e)}))}},{key:"_calculate_event_properties",value:function(e,t){if(!this.persistence||!this.sessionPersistence)return t;var n=this.persistence.remove_event_timer(e),i=r({},t);if(i.token=this.config.token,"$snapshot"===e){var s=r(r({},this.persistence.properties()),this.sessionPersistence.properties());return i.distinct_id=s.distinct_id,i}var o=yt.properties();if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),l=a.sessionId,u=a.windowId;i.$session_id=l,i.$window_id=u}if(this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===e||"$pageleave"===e||"$autocapture"===e)){var c=this.sessionPropsManager.getSessionProps();i=z(i,c)}if(this.config.__preview_measure_pageview_stats){var d={};"$pageview"===e?d=this.pageViewManager.doPageView():"$pageleave"===e&&(d=this.pageViewManager.doPageLeave()),i=z(i,d)}if("$pageview"===e&&$&&(i.title=$.title),"$performance_event"===e){var h=this.persistence.properties();return i.distinct_id=h.distinct_id,i.$current_url=o.$current_url,i}if(!C(n)){var f=(new Date).getTime()-n;i.$duration=parseFloat((f/1e3).toFixed(3))}B&&this.config.opt_out_useragent_filter&&(i.$browser_type=Xn(B,this.config.custom_blocked_useragents)?"bot":"browser"),i=z({},yt.properties(),this.persistence.properties(),this.sessionPersistence.properties(),i);var p=this.config.property_blacklist;S(p)?W(p,(function(e){delete i[e]})):q.error("Invalid value for property_blacklist config: "+p);var g=this.config.sanitize_properties;return g&&(i=g(i,e)),i}},{key:"register",value:function(e,t){var n;null===(n=this.persistence)||void 0===n||n.register(e,t)}},{key:"register_once",value:function(e,t,n){var i;null===(i=this.persistence)||void 0===i||i.register_once(e,t,n)}},{key:"register_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}},{key:"unregister",value:function(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}},{key:"unregister_for_session",value:function(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}},{key:"_register_single",value:function(e,t){this.register(u({},e,t))}},{key:"getFeatureFlag",value:function(e,t){return this.featureFlags.getFeatureFlag(e,t)}},{key:"getFeatureFlagPayload",value:function(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}},{key:"isFeatureEnabled",value:function(e,t){return this.featureFlags.isFeatureEnabled(e,t)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}},{key:"getEarlyAccessFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var t,n;return null!==(t=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(e))&&void 0!==t?t:function(){}}},{key:"getSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}},{key:"getActiveMatchingSurveys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}},{key:"identify",value:function(e,t,n){if(!this.__loaded||!this.persistence)return q.uninitializedWarning("posthog.identify");if(e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))q.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var r=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:r},"")}e!==i&&e!==this.get_property(xe)&&(this.unregister(xe),this.register({distinct_id:e}));var s="anonymous"===this.persistence.get_user_state();e!==i&&s?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:t||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(i)):(t||n)&&this.setPersonProperties(t,n),e!==i&&(this.reloadFeatureFlags(),this.unregister(Ae))}else q.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,t){(e||t)&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}},{key:"group",value:function(e,t,n){if(e&&t){var i=this.getGroups();i[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:r(r({},i),{},u({},e,t))}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags(u({},e,n))),i[e]===t||n||this.reloadFeatureFlags()}else q.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,t)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setGroupPropertiesForFlags(e,t)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var t,n,i,r;if(!this.__loaded)return q.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");null===(t=this.persistence)||void 0===t||t.clear(),null===(n=this.sessionPersistence)||void 0===n||n.clear(),null===(i=this.persistence)||void 0===i||i.set_user_state("anonymous"),null===(r=this.sessionManager)||void 0===r||r.resetSessionId();var o=this.config.get_device_id(tt());this.register_once({distinct_id:o,$device_id:e?o:s},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var t=this.config.ui_host||this.config.api_host,n=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=n.sessionId,r=n.sessionStartTimestamp,s=t+"/replay/"+i;if(null!=e&&e.withTimestamp&&r){var o,a=null!==(o=e.timestampLookBack)&&void 0!==o?o:10;if(!r)return s;var l=Math.max(Math.floor(((new Date).getTime()-r)/1e3)-a,0);s+="?t=".concat(l)}return s}},{key:"alias",value:function(e,t){return e===this.get_property(we)?(q.critical("Attempting to create alias for existing People user - aborting."),-2):(C(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(xe,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(q.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1))}},{key:"set_config",value:function(e){var t,n,i=r({},this.config);I(e)&&(z(this.config,e),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),this.config.api_host=this.config.api_host.replace(/\/$/,""),null===(t=this.persistence)||void 0===t||t.update_config(this.config),null===(n=this.sessionPersistence)||void 0===n||n.update_config(this.config),lt.is_supported()&&"true"===lt.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(y.DEBUG=!0),this.sessionRecording&&!C(e.disable_session_recording)&&i.disable_session_recording!==e.disable_session_recording&&(e.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}},{key:"getSessionProperty",value:function(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}},{key:"toString",value:function(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:ti;return t!==ti&&(t=ti+"."+t),t}},{key:"_gdpr_init",value:function(){"localStorage"===this.config.opt_out_capturing_persistence_type&&lt.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!ot.get("ph_optout")||(ot.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var t,n,i,r,s;if(e&&e.clear_persistence)i=!0;else{if(!e||!e.enable_persistence)return;i=!1}this.config.disable_persistence||(null===(t=this.persistence)||void 0===t?void 0:t.disabled)===i||null===(r=this.persistence)||void 0===r||r.set_disabled(i),this.config.disable_persistence||(null===(n=this.sessionPersistence)||void 0===n?void 0:n.disabled)===i||null===(s=this.sessionPersistence)||void 0===s||s.set_disabled(i)}},{key:"_gdpr_call_func",value:function(e,t){return t=z({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},t||{}),lt.is_supported()||"localStorage"!==t.persistence_type||(t.persistence_type="cookie"),e(this.config.token,{capture:t.capture,captureEventName:t.capture_event_name,captureProperties:t.capture_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieExpiration:t.cookie_expiration,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=z({enable_persistence:!0},e||{}),this._gdpr_call_func(Dt,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var t=z({clear_persistence:!0},e||{});this._gdpr_call_func(Ht,t),this._gdpr_update_persistence(t)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(qt,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(Ut,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var t=z({enable_persistence:!0},null!=e?e:{});this._gdpr_call_func(Vt,t),this._gdpr_update_persistence(t)}},{key:"debug",value:function(e){!1===e?(null==N||N.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==N||N.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),e}();!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=X(e.prototype[t[n]])}(ai,["identify"]);var li,ui,ci={};!function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(li||(li={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(ui||(ui={}));var di=(Vn=Un.INIT_MODULE,(Zn=new ai).init=function(e,t,n){if(n)return Zn[n]||(Zn[n]=ci[n]=si(e||"",t||{},n,(function(e){Zn[n]=ci[n]=e,e._loaded()}))),Zn[n];var i=Zn;return ci[ti]?i=ci[ti]:e&&(i=si(e,t||{},ti,(function(e){ci[ti]=e,e._loaded()})),ci[ti]=i),Zn=i,Vn===Un.INIT_SNIPPET&&(D[ti]=Zn),W(ci,(function(e,t){t!==ti&&(Zn[t]=e)})),i},Zn.init(),function(){function e(){e.done||(e.done=!0,ii=!1,W(ci,(function(e){e._dom_loaded()})))}null!=$&&$.addEventListener&&("complete"===$.readyState?e():$.addEventListener("DOMContentLoaded",e,!1)),N&&ie(N,"load",e,!0)}(),Zn)}}]);